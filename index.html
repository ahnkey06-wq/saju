<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì‚¬ì£¼íŒ”ì ë¶„ì„ Â· å››æŸ±å…«å­—</title>
<meta name="description" content="ìƒë…„ì›”ì¼ì‹œë¥¼ ì…ë ¥í•˜ë©´ ì‚¬ì£¼íŒ”ì(å››æŸ±å…«å­—)ë¥¼ ìë™ ê³„ì‚°í•˜ê³  ì˜¤í–‰ ë¶„ì„, ì„±ê²©, ìš´ì„¸ë¥¼ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;900&family=Noto+Serif+KR:wght@400;500;600;700;900&display=swap" rel="stylesheet">
<style>
:root {
    --bg: #f5f5f5;
    --bg-light: #2a2218;
    --bg-card: #332a1f;
    --bg-card-light: #3d3225;
    --border: #5a4a35;
    --border-light: #7a6a50;
    --gold: #d4a543;
    --gold-light: #e8c468;
    --gold-dark: #b08930;
    --red: #c44040;
    --red-light: #e06060;
    --text: #f0e6d6;
    --text-secondary: #bfb09a;
    --text-muted: #8a7a65;
    --wood: #4a9e5e;
    --fire: #d45050;
    --earth: #c4a042;
    --metal: #c0c0c0;
    --water: #4a7ec4;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: 'Noto Sans KR', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    background-image:
        radial-gradient(ellipse at 20% 50%, rgba(212,165,67,0.03) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 50%, rgba(196,64,64,0.03) 0%, transparent 50%);
}
.serif { font-family: 'Noto Serif KR', serif; }

/* Header */
.header {
    text-align: center;
    padding: 48px 20px 32px;
    position: relative;
}
.header::after {
    content: '';
    display: block;
    width: 120px;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
    margin: 24px auto 0;
}
.header-hanja {
    font-size: 14px;
    color: var(--gold);
    letter-spacing: 12px;
    margin-bottom: 8px;
}
.header h1 {
    font-family: 'Noto Serif KR', serif;
    font-size: 36px;
    font-weight: 700;
    color: var(--text);
    letter-spacing: 4px;
}
.header h1 span { color: var(--gold); }
.header-sub {
    font-size: 14px;
    color: var(--text-muted);
    margin-top: 8px;
}

/* Container */
.container {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 20px 80px;
}

/* Input Section */
.input-section {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 32px;
    margin-top: 32px;
    position: relative;
}
.input-section::before {
    content: 'â˜°';
    position: absolute;
    top: -14px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-card);
    color: var(--gold);
    padding: 0 16px;
    font-size: 20px;
}
.section-title {
    font-family: 'Noto Serif KR', serif;
    font-size: 20px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 24px;
    color: var(--gold-light);
}
.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
}
.form-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
}
.form-group.full {
    grid-column: 1 / -1;
}
.form-label {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 500;
}
.form-input {
    background: var(--bg-light);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 12px 16px;
    color: var(--text);
    font-size: 15px;
    font-family: 'Noto Sans KR', sans-serif;
    outline: none;
    transition: all 0.3s;
    -webkit-appearance: none;
}
.form-input:focus {
    border-color: var(--gold);
    box-shadow: 0 0 0 3px rgba(212,165,67,0.15);
}
select.form-input {
    cursor: pointer;
}
.gender-row {
    display: flex;
    gap: 12px;
}
.gender-btn {
    flex: 1;
    padding: 12px;
    background: var(--bg-light);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text-secondary);
    font-size: 15px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
    font-family: 'Noto Sans KR', sans-serif;
}
.gender-btn:hover { border-color: var(--gold); }
.gender-btn.active {
    background: rgba(212,165,67,0.15);
    border-color: var(--gold);
    color: var(--gold-light);
    font-weight: 600;
}
.submit-btn {
    display: block;
    width: 100%;
    padding: 16px;
    margin-top: 24px;
    background: linear-gradient(135deg, var(--gold-dark), var(--gold));
    border: none;
    border-radius: 12px;
    color: #1a1410;
    font-size: 17px;
    font-weight: 700;
    font-family: 'Noto Serif KR', serif;
    cursor: pointer;
    transition: all 0.3s;
    letter-spacing: 4px;
}
.submit-btn:hover {
    background: linear-gradient(135deg, var(--gold), var(--gold-light));
    transform: translateY(-1px);
    box-shadow: 0 4px 20px rgba(212,165,67,0.3);
}
.submit-btn:active { transform: translateY(0); }

/* Result Section */
#result { display: none; margin-top: 32px; }

/* Saju Pillars */
.pillars-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px;
    text-align: center;
}
.pillars-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-top: 20px;
}
.pillar {
    background: var(--bg-light);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px 8px;
    transition: all 0.3s;
}
.pillar:hover {
    border-color: var(--gold);
    transform: translateY(-2px);
}
.pillar-label {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 4px;
}
.pillar-hanja {
    font-size: 11px;
    color: var(--text-muted);
}
.pillar-char {
    font-family: 'Noto Serif KR', serif;
    font-size: 36px;
    font-weight: 700;
    line-height: 1.2;
    margin: 6px 0;
}
.pillar-name {
    font-size: 13px;
    color: var(--text-secondary);
    margin-top: 2px;
}
.pillar-element {
    display: inline-block;
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 6px;
    margin-top: 6px;
    font-weight: 500;
}
.el-wood { background: rgba(74,158,94,0.2); color: var(--wood); }
.el-fire { background: rgba(212,80,80,0.2); color: var(--fire); }
.el-earth { background: rgba(196,160,66,0.2); color: var(--earth); }
.el-metal { background: rgba(192,192,192,0.2); color: var(--metal); }
.el-water { background: rgba(74,126,196,0.2); color: var(--water); }
.divider {
    width: 100%;
    height: 1px;
    background: var(--border);
    margin: 8px 0;
}

/* Ohaeng (Five Elements) */
.ohaeng-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px;
    margin-top: 16px;
}
.ohaeng-bars {
    display: flex;
    flex-direction: column;
    gap: 14px;
    margin-top: 20px;
}
.ohaeng-row {
    display: flex;
    align-items: center;
    gap: 12px;
}
.ohaeng-label {
    width: 60px;
    font-size: 14px;
    font-weight: 600;
    text-align: right;
    flex-shrink: 0;
}
.ohaeng-bar-bg {
    flex: 1;
    height: 28px;
    background: var(--bg-light);
    border-radius: 8px;
    overflow: hidden;
    position: relative;
}
.ohaeng-bar {
    height: 100%;
    border-radius: 8px;
    transition: width 1s ease-out;
    display: flex;
    align-items: center;
    padding-left: 10px;
    font-size: 12px;
    font-weight: 600;
    color: #fff;
    min-width: 30px;
}
.bar-wood { background: linear-gradient(90deg, #3a7e4e, #5abe72); }
.bar-fire { background: linear-gradient(90deg, #b03030, #e05050); }
.bar-earth { background: linear-gradient(90deg, #a08030, #c4a042); }
.bar-metal { background: linear-gradient(90deg, #808080, #b0b0b0); }
.bar-water { background: linear-gradient(90deg, #3a5ea0, #5a8ed4); }
.ohaeng-count {
    width: 28px;
    font-size: 14px;
    font-weight: 700;
    text-align: center;
    flex-shrink: 0;
}

/* Analysis Cards */
.analysis-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px;
    margin-top: 16px;
}
.analysis-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-top: 16px;
}
.analysis-item {
    background: var(--bg-light);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 16px;
}
.analysis-item-title {
    font-size: 13px;
    color: var(--gold);
    font-weight: 600;
    margin-bottom: 6px;
}
.analysis-item-text {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.6;
}
.personality-text {
    margin-top: 16px;
    font-size: 15px;
    color: var(--text-secondary);
    line-height: 1.8;
    padding: 20px;
    background: var(--bg-light);
    border-radius: 12px;
    border-left: 3px solid var(--gold);
}

/* Ilgan Box */
.ilgan-box {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-top: 16px;
    padding: 20px;
    background: var(--bg-light);
    border-radius: 12px;
    border: 1px solid var(--border);
}
.ilgan-char {
    font-family: 'Noto Serif KR', serif;
    font-size: 48px;
    font-weight: 900;
}
.ilgan-info h3 {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 4px;
}
.ilgan-info p {
    font-size: 14px;
    color: var(--text-secondary);
}

/* 2026 Fortune Section */
.fortune-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px;
    margin-top: 16px;
    position: relative;
    overflow: hidden;
}
.fortune-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--fire), var(--gold), var(--fire));
}
.fortune-year-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin-bottom: 20px;
    padding: 16px;
    background: linear-gradient(135deg, rgba(212,80,80,0.1), rgba(212,165,67,0.1));
    border-radius: 12px;
    border: 1px solid rgba(212,80,80,0.2);
}
.fortune-year-char {
    font-family: 'Noto Serif KR', serif;
    font-size: 42px;
    font-weight: 900;
    color: var(--fire);
}
.fortune-year-info h3 {
    font-size: 20px;
    font-weight: 700;
    color: var(--gold-light);
}
.fortune-year-info p {
    font-size: 13px;
    color: var(--text-secondary);
}
.fortune-score {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 24px;
    margin: 20px 0;
    padding: 20px;
    background: var(--bg-light);
    border-radius: 12px;
}
.score-circle {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    border: 3px solid;
    flex-shrink: 0;
}
.score-circle .score-num {
    font-size: 28px;
    line-height: 1;
}
.score-circle .score-label {
    font-size: 11px;
    margin-top: 2px;
}
.score-detail {
    flex: 1;
}
.score-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}
.score-row-label {
    width: 70px;
    font-size: 13px;
    color: var(--text-secondary);
    flex-shrink: 0;
}
.score-bar-bg {
    flex: 1;
    height: 10px;
    background: rgba(255,255,255,0.05);
    border-radius: 5px;
    overflow: hidden;
}
.score-bar {
    height: 100%;
    border-radius: 5px;
    transition: width 1s ease-out;
}
.score-row-val {
    width: 30px;
    text-align: right;
    font-size: 13px;
    font-weight: 600;
    flex-shrink: 0;
}
.fortune-monthly {
    margin-top: 20px;
}
.monthly-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    margin-top: 12px;
}
.month-card {
    background: var(--bg-light);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 12px 8px;
    text-align: center;
    transition: all 0.3s;
}
.month-card:hover {
    border-color: var(--gold);
    transform: translateY(-2px);
}
.month-num {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 4px;
}
.month-icon {
    font-size: 20px;
    margin-bottom: 4px;
}
.month-luck {
    font-size: 12px;
    font-weight: 600;
}
.month-desc {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 4px;
    line-height: 1.4;
}
.fortune-advice {
    margin-top: 20px;
    padding: 20px;
    background: linear-gradient(135deg, rgba(212,165,67,0.08), rgba(74,126,196,0.05));
    border: 1px solid rgba(212,165,67,0.2);
    border-radius: 12px;
    border-left: 3px solid var(--gold);
}
.fortune-advice-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--gold);
    margin-bottom: 8px;
}
.fortune-advice-text {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.8;
}
.luck-excellent { color: #f59e0b; }
.luck-good { color: #10b981; }
.luck-normal { color: #94a3b8; }
.luck-caution { color: #f97316; }
.luck-difficult { color: #ef4444; }
.bar-excellent { background: linear-gradient(90deg, #d97706, #f59e0b); }
.bar-good { background: linear-gradient(90deg, #059669, #10b981); }
.bar-normal { background: linear-gradient(90deg, #64748b, #94a3b8); }
.bar-caution { background: linear-gradient(90deg, #c2410c, #f97316); }

/* í‰ìƒìš´(ëŒ€ìš´) ì„¹ì…˜ */
.lifetime-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px;
    margin-top: 16px;
    position: relative;
    overflow: hidden;
}
.lifetime-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--water), var(--gold), var(--wood), var(--fire), var(--metal));
}
.lifetime-summary {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin: 16px 0;
}
.lifetime-summary-item {
    background: var(--bg-light);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px;
    text-align: center;
}
.lifetime-summary-item .ls-label {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 4px;
}
.lifetime-summary-item .ls-value {
    font-size: 18px;
    font-weight: 700;
}
.daeun-timeline {
    display: flex;
    overflow-x: auto;
    gap: 0;
    margin: 20px 0;
    padding: 8px 0;
    position: relative;
}
.daeun-timeline::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0; right: 0;
    height: 2px;
    background: var(--border);
    z-index: 0;
}
.daeun-item {
    flex: 0 0 auto;
    width: 100px;
    text-align: center;
    position: relative;
    z-index: 1;
    cursor: default;
    transition: all 0.3s;
    padding: 8px 4px;
}
.daeun-item:hover {
    transform: translateY(-3px);
}
.daeun-item.current {
    transform: scale(1.08);
}
.daeun-item.current .daeun-box {
    border-color: var(--gold);
    box-shadow: 0 0 12px rgba(212,165,67,0.3);
}
.daeun-item.past .daeun-box {
    opacity: 0.5;
}
.daeun-box {
    background: var(--bg-card);
    border: 2px solid var(--border);
    border-radius: 12px;
    padding: 10px 6px;
    transition: all 0.3s;
}
.daeun-age {
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 4px;
}
.daeun-chars {
    font-family: 'Noto Serif KR', serif;
    font-size: 22px;
    font-weight: 700;
    line-height: 1.3;
}
.daeun-name {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 2px;
}
.daeun-element-tag {
    display: inline-block;
    font-size: 10px;
    padding: 1px 6px;
    border-radius: 4px;
    margin-top: 4px;
    font-weight: 500;
}
.daeun-score-bar {
    width: 100%;
    height: 4px;
    background: rgba(255,255,255,0.05);
    border-radius: 2px;
    margin-top: 6px;
    overflow: hidden;
}
.daeun-score-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 1s ease-out;
}
.current-daeun-detail {
    background: var(--bg-light);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    margin: 16px 0;
    border-left: 3px solid var(--gold);
}
.current-daeun-detail h4 {
    font-size: 16px;
    font-weight: 700;
    color: var(--gold-light);
    margin-bottom: 12px;
}
.cd-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}
.cd-item {
    background: var(--bg-card);
    border-radius: 8px;
    padding: 12px;
}
.cd-item-label {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 4px;
}
.cd-item-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
}
.lifetime-flow {
    margin-top: 16px;
}
.flow-title {
    font-size: 15px;
    font-weight: 700;
    color: var(--gold-light);
    margin-bottom: 12px;
}
.flow-chart {
    display: flex;
    align-items: flex-end;
    gap: 2px;
    height: 80px;
    padding: 4px 0;
}
.flow-bar-wrap {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100%;
    justify-content: flex-end;
}
.flow-bar {
    width: 100%;
    max-width: 32px;
    border-radius: 4px 4px 0 0;
    transition: height 1s ease-out;
    min-height: 4px;
}
.flow-bar-label {
    font-size: 9px;
    color: var(--text-muted);
    margin-top: 4px;
    white-space: nowrap;
}
.lifetime-advice {
    margin-top: 16px;
    padding: 16px;
    background: linear-gradient(135deg, rgba(74,126,196,0.08), rgba(212,165,67,0.05));
    border: 1px solid rgba(74,126,196,0.2);
    border-radius: 12px;
    border-left: 3px solid var(--water);
}
.lifetime-advice-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--water);
    margin-bottom: 8px;
}
.lifetime-advice-text {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.8;
}

@media (max-width: 640px) {
    .monthly-grid { grid-template-columns: repeat(3, 1fr); }
    .fortune-score { flex-direction: column; }
    .fortune-year-char { font-size: 32px; }
    .lifetime-summary { grid-template-columns: 1fr; }
    .daeun-item { width: 80px; }
    .daeun-chars { font-size: 18px; }
    .cd-grid { grid-template-columns: 1fr; }
    .flow-bar-label { font-size: 8px; }
}

/* Footer */
.footer {
    text-align: center;
    padding: 32px 20px;
    color: var(--text-muted);
    font-size: 12px;
    border-top: 1px solid var(--border);
    margin-top: 48px;
}
.footer-hanja {
    font-family: 'Noto Serif KR', serif;
    font-size: 14px;
    color: var(--border-light);
    letter-spacing: 8px;
    margin-bottom: 8px;
}

/* Responsive */
@media (max-width: 640px) {
    .header h1 { font-size: 28px; }
    .form-row { grid-template-columns: 1fr; }
    .pillars-grid { grid-template-columns: repeat(4, 1fr); gap: 6px; }
    .pillar { padding: 12px 4px; }
    .pillar-char { font-size: 28px; }
    .analysis-grid { grid-template-columns: 1fr; }
    .input-section, .pillars-card, .ohaeng-card, .analysis-card { padding: 20px; }
    .ilgan-char { font-size: 36px; }
}
</style>
</head>
<body>

<header class="header">
    <div class="header-hanja serif">å›› æŸ± å…« å­—</div>
    <h1 class="serif">ì‚¬ì£¼<span>íŒ”ì</span> ë¶„ì„</h1>
    <div class="header-sub">ìƒë…„ì›”ì¼ì‹œë¥¼ ì…ë ¥í•˜ë©´ ë‹¹ì‹ ì˜ ì‚¬ì£¼íŒ”ìë¥¼ í’€ì–´ë“œë¦½ë‹ˆë‹¤</div>
</header>

<main class="container">
    <!-- Input Form -->
    <section class="input-section">
        <div class="section-title serif">ìƒë…„ì›”ì¼ì‹œ ì…ë ¥</div>
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">ì–‘ë ¥ / ìŒë ¥</label>
                <select id="calType" class="form-input">
                    <option value="solar">ì–‘ë ¥ (é™½æ›†)</option>
                    <option value="lunar">ìŒë ¥ (é™°æ›†)</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">ì„±ë³„</label>
                <div class="gender-row">
                    <button type="button" class="gender-btn active" data-gender="male" onclick="selectGender(this)">â™‚ ë‚¨ì„±</button>
                    <button type="button" class="gender-btn" data-gender="female" onclick="selectGender(this)">â™€ ì—¬ì„±</button>
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">ì¶œìƒë…„ë„</label>
                <select id="year" class="form-input"></select>
            </div>
            <div class="form-group">
                <label class="form-label">ì¶œìƒì›”</label>
                <select id="month" class="form-input"></select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">ì¶œìƒì¼</label>
                <select id="day" class="form-input"></select>
            </div>
            <div class="form-group">
                <label class="form-label">ì¶œìƒì‹œê°„</label>
                <select id="hour" class="form-input">
                    <option value="-1">ëª¨ë¦„</option>
                    <option value="0">å­ì‹œ (23:00~01:00)</option>
                    <option value="1">ä¸‘ì‹œ (01:00~03:00)</option>
                    <option value="2">å¯…ì‹œ (03:00~05:00)</option>
                    <option value="3">å¯ì‹œ (05:00~07:00)</option>
                    <option value="4">è¾°ì‹œ (07:00~09:00)</option>
                    <option value="5">å·³ì‹œ (09:00~11:00)</option>
                    <option value="6">åˆì‹œ (11:00~13:00)</option>
                    <option value="7">æœªì‹œ (13:00~15:00)</option>
                    <option value="8">ç”³ì‹œ (15:00~17:00)</option>
                    <option value="9">é…‰ì‹œ (17:00~19:00)</option>
                    <option value="10">æˆŒì‹œ (19:00~21:00)</option>
                    <option value="11">äº¥ì‹œ (21:00~23:00)</option>
                </select>
            </div>
        </div>
        <button class="submit-btn" onclick="analyze()">ì‚¬ ì£¼ ë¶„ ì„</button>
    </section>

    <!-- Result -->
    <div id="result">
        <!-- Ilgan (Day Master) -->
        <section class="analysis-card" id="ilganSection">
            <div class="section-title serif">ğŸ”® ì¼ê°„ (æ—¥å¹²) â€” ë‚˜ì˜ ë³¸ì§ˆ</div>
            <div id="ilganBox" class="ilgan-box"></div>
        </section>

        <!-- Four Pillars -->
        <section class="pillars-card" id="pillarsSection">
            <div class="section-title serif">å››æŸ±å…«å­— â€” ì‚¬ì£¼íŒ”ì</div>
            <div class="pillars-grid" id="pillarsGrid"></div>
        </section>

        <!-- Five Elements -->
        <section class="ohaeng-card" id="ohaengSection">
            <div class="section-title serif">äº”è¡Œ â€” ì˜¤í–‰ ë¶„ì„</div>
            <div class="ohaeng-bars" id="ohaengBars"></div>
        </section>

        <!-- Personality -->
        <section class="analysis-card" id="personalitySection">
            <div class="section-title serif">æ€§æ ¼ â€” ì„±ê²© ë¶„ì„</div>
            <div id="personalityText" class="personality-text"></div>
        </section>

        <!-- Detailed Analysis -->
        <section class="analysis-card" id="detailSection">
            <div class="section-title serif">å‘½ç† â€” ìƒì„¸ ë¶„ì„</div>
            <div class="analysis-grid" id="detailGrid"></div>
        </section>

        <!-- 2026 Fortune -->
        <section class="fortune-card" id="fortuneSection">
            <div class="section-title serif">ğŸ´ 2026ë…„ ä¸™åˆå¹´ ìš´ì„¸</div>
            <div id="fortuneYearHeader" class="fortune-year-header"></div>
            <div id="fortuneScore" class="fortune-score"></div>
            <div id="fortuneMonthly" class="fortune-monthly"></div>
            <div id="fortuneAdvice" class="fortune-advice"></div>
        </section>

        <!-- í‰ìƒìš´ (ëŒ€ìš´) -->
        <section class="lifetime-card" id="lifetimeSection">
            <div class="section-title serif">ğŸŒŠ í‰ìƒìš´ â€” å¤§é‹ì˜ íë¦„</div>
            <div id="lifetimeSummary" class="lifetime-summary"></div>
            <div id="daeunTimeline" class="daeun-timeline"></div>
            <div id="currentDaeunDetail" class="current-daeun-detail"></div>
            <div id="lifetimeFlow" class="lifetime-flow"></div>
            <div id="lifetimeAdvice" class="lifetime-advice"></div>
        </section>
    </div>
</main>

<footer class="footer">
    <div class="footer-hanja serif">å‘½ ç† å­¸</div>
    <p>ë³¸ ì‚¬ì´íŠ¸ì˜ ì‚¬ì£¼ ë¶„ì„ì€ ì°¸ê³ ìš©ì´ë©°, ì „ë¬¸ ì—­í•™ì¸ì˜ ìƒë‹´ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
    <p style="margin-top:4px;">Â© 2025 ì‚¬ì£¼íŒ”ì ë¶„ì„ Â· å››æŸ±å…«å­—</p>
</footer>

<script>
// ===== ì²œê°„(å¤©å¹²) & ì§€ì§€(åœ°æ”¯) ë°ì´í„° =====
const CHEONGAN = ['ê°‘','ì„','ë³‘','ì •','ë¬´','ê¸°','ê²½','ì‹ ','ì„','ê³„'];
const CHEONGAN_HANJA = ['ç”²','ä¹™','ä¸™','ä¸','æˆŠ','å·±','åºš','è¾›','å£¬','ç™¸'];
const JIJI = ['ì','ì¶•','ì¸','ë¬˜','ì§„','ì‚¬','ì˜¤','ë¯¸','ì‹ ','ìœ ','ìˆ ','í•´'];
const JIJI_HANJA = ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'];

// ì˜¤í–‰ ë§¤í•‘
const CHEONGAN_ELEMENT = [0,0,1,1,2,2,3,3,4,4]; // ëª©,ëª©,í™”,í™”,í† ,í† ,ê¸ˆ,ê¸ˆ,ìˆ˜,ìˆ˜
const JIJI_ELEMENT = [4,2,0,0,2,1,1,2,3,3,2,4]; // ìˆ˜,í† ,ëª©,ëª©,í† ,í™”,í™”,í† ,ê¸ˆ,ê¸ˆ,í† ,ìˆ˜
const ELEMENT_NAMES = ['ëª©(æœ¨)','í™”(ç«)','í† (åœŸ)','ê¸ˆ(é‡‘)','ìˆ˜(æ°´)'];
const ELEMENT_COLORS = ['var(--wood)','var(--fire)','var(--earth)','var(--metal)','var(--water)'];
const ELEMENT_CLASSES = ['el-wood','el-fire','el-earth','el-metal','el-water'];
const BAR_CLASSES = ['bar-wood','bar-fire','bar-earth','bar-metal','bar-water'];
const ELEMENT_SHORT = ['æœ¨','ç«','åœŸ','é‡‘','æ°´'];

// ìŒì–‘
const CHEONGAN_YINYANG = ['ì–‘','ìŒ','ì–‘','ìŒ','ì–‘','ìŒ','ì–‘','ìŒ','ì–‘','ìŒ'];

// ì‹œê°„ ì²œê°„ ê³„ì‚° (ì¼ê°„ ê¸°ì¤€)
function getHourGan(dayGanIdx, hourIdx) {
    const base = (dayGanIdx % 5) * 2;
    return (base + hourIdx) % 10;
}

// ===== ë§Œì„¸ë ¥ ê³„ì‚° (ê°„ì†Œí™”) =====
// ê¸°ì¤€ì¼: 1900ë…„ 1ì›” 31ì¼ = ê²½ì(åºšå­)ë…„ ì •ì¶•(ä¸ä¸‘)ì›” ê°‘ì§„(ç”²è¾°)ì¼
// Julian Day Number ê¸°ë°˜ ê³„ì‚°

function solarToJDN(y, m, d) {
    const a = Math.floor((14 - m) / 12);
    const yy = y + 4800 - a;
    const mm = m + 12 * a - 3;
    return d + Math.floor((153 * mm + 2) / 5) + 365 * yy + Math.floor(yy / 4) - Math.floor(yy / 100) + Math.floor(yy / 400) - 32045;
}

// ì ˆê¸°(ç¯€æ°£) ê¸°ë°˜ ì›”ì£¼ ê³„ì‚° - ê°„ì†Œí™”ëœ ì ˆê¸° ì‹œì‘ì¼
// ê° ì›”ì˜ ì ˆê¸° ì‹œì‘ì¼ (ì–‘ë ¥ ê¸°ì¤€ ëŒ€ëµì )
const JEOLGI_DATES = [
    [2, 4],   // 1ì›”(ì¸ì›”): ì…ì¶˜ ~2/4
    [3, 6],   // 2ì›”(ë¬˜ì›”): ê²½ì¹© ~3/6
    [4, 5],   // 3ì›”(ì§„ì›”): ì²­ëª… ~4/5
    [5, 6],   // 4ì›”(ì‚¬ì›”): ì…í•˜ ~5/6
    [6, 6],   // 5ì›”(ì˜¤ì›”): ë§ì¢… ~6/6
    [7, 7],   // 6ì›”(ë¯¸ì›”): ì†Œì„œ ~7/7
    [8, 7],   // 7ì›”(ì‹ ì›”): ì…ì¶” ~8/7
    [9, 8],   // 8ì›”(ìœ ì›”): ë°±ë¡œ ~9/8
    [10, 8],  // 9ì›”(ìˆ ì›”): í•œë¡œ ~10/8
    [11, 7],  // 10ì›”(í•´ì›”): ì…ë™ ~11/7
    [12, 7],  // 11ì›”(ìì›”): ëŒ€ì„¤ ~12/7
    [1, 5],   // 12ì›”(ì¶•ì›”): ì†Œí•œ ~1/5
];

function getMonthPillar(yearGanIdx, solarMonth, solarDay) {
    // ì ˆê¸° ê¸°ì¤€ìœ¼ë¡œ ì›” ê²°ì •
    let monthIdx = -1; // ì¸ì›”=0 (1ì›”), ë¬˜ì›”=1 (2ì›”), ...
    for (let i = 0; i < 12; i++) {
        const [jm, jd] = JEOLGI_DATES[i];
        if (solarMonth === jm && solarDay >= jd) {
            monthIdx = i;
        } else if (solarMonth === jm && solarDay < jd) {
            monthIdx = (i + 11) % 12;
        }
    }
    if (monthIdx === -1) {
        // í•´ë‹¹ ì›”ì˜ ì ˆê¸° ê¸°ë°˜
        for (let i = 0; i < 12; i++) {
            const [jm, jd] = JEOLGI_DATES[i];
            if (solarMonth === jm) {
                monthIdx = solarDay >= jd ? i : (i + 11) % 12;
                break;
            }
        }
    }
    if (monthIdx === -1) monthIdx = (solarMonth + 9) % 12;

    // ì›” ì²œê°„: ì—°ê°„ ê¸°ì¤€
    const monthGanBase = (yearGanIdx % 5) * 2 + 2;
    const monthGan = (monthGanBase + monthIdx) % 10;
    // ì›” ì§€ì§€: ì¸(2)ë¶€í„°
    const monthJi = (monthIdx + 2) % 12;

    return { gan: monthGan, ji: monthJi };
}

// ì—°ì£¼ ê³„ì‚°
function getYearPillar(year, solarMonth, solarDay) {
    // ì…ì¶˜(2/4) ì „ì´ë©´ ì „ë…„ë„
    let adjYear = year;
    if (solarMonth < 2 || (solarMonth === 2 && solarDay < 4)) {
        adjYear = year - 1;
    }
    const ganIdx = (adjYear - 4) % 10;
    const jiIdx = (adjYear - 4) % 12;
    return { gan: (ganIdx + 10) % 10, ji: (jiIdx + 12) % 12 };
}

// ì¼ì£¼ ê³„ì‚° (JDN ê¸°ì¤€)
function getDayPillar(y, m, d) {
    const jdn = solarToJDN(y, m, d);
    // ê¸°ì¤€: JDN 2451911 = 2001-01-01 = ê°‘ì(ç”²å­)ì¼
    // ç”²=0, å­=0
    const diff = jdn - 2451911;
    const ganIdx = ((diff % 10) + 10) % 10;
    const jiIdx = ((diff % 12) + 12) % 12;
    return { gan: ganIdx, ji: jiIdx };
}

// ===== ì¼ê°„ë³„ ì„±ê²© & ë¶„ì„ =====
const ILGAN_DATA = {
    0: { name: 'ê°‘ëª©(ç”²æœ¨)', symbol: 'ğŸŒ³', nature: 'í° ë‚˜ë¬´, ëŒ€ë“¤ë³´',
        personality: 'ì •ì˜ê°ì´ ê°•í•˜ê³  ê³§ì€ ì„±í’ˆì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ë¦¬ë”ì‹­ì´ ë›°ì–´ë‚˜ë©° í° ëœ»ì„ í’ˆê³  ìˆìŠµë‹ˆë‹¤. ìš°ì§í•˜ê³  ì±…ì„ê°ì´ ê°•í•˜ì§€ë§Œ, ë•Œë¡œëŠ” ê³ ì§‘ì´ ì„¸ê³  ìœ ì—°ì„±ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í° ë‚˜ë¬´ì²˜ëŸ¼ í•œ ê³³ì— ë¿Œë¦¬ë¥¼ ë‚´ë¦¬ë©´ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ëˆê¸°ê°€ ìˆìŠµë‹ˆë‹¤.',
        career: 'ê²½ì˜ì, ì •ì¹˜ì¸, êµìœ¡ì, ë²•ì¡°ì¸',
        love: 'í—Œì‹ ì ì´ë©° í•œë²ˆ ë§ˆìŒì„ ì£¼ë©´ ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤',
        health: 'ê°„(è‚), ë‹´(è†½) ì£¼ì˜',
        lucky: 'ë´„(æ˜¥), ë™ìª½(æ±)' },
    1: { name: 'ì„ëª©(ä¹™æœ¨)', symbol: 'ğŸŒ¿', nature: 'í’€, ë„ì¿¨, ê½ƒ',
        personality: 'ë¶€ë“œëŸ½ê³  ìœ ì—°í•œ ì„±í’ˆìœ¼ë¡œ ì ì‘ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì˜ˆìˆ ì  ê°ê°ì´ íƒì›”í•˜ë©° ì„¬ì„¸í•œ ê°ì„±ì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ê²‰ìœ¼ë¡œëŠ” ìœ ìˆœí•´ ë³´ì´ì§€ë§Œ ë‚´ë©´ì— ê°•í•œ ìƒëª…ë ¥ì„ í’ˆê³  ìˆì–´, ì–´ë–¤ í™˜ê²½ì—ì„œë„ ì‚´ì•„ë‚¨ëŠ” ëˆì§ˆê¸´ ë©´ì´ ìˆìŠµë‹ˆë‹¤.',
        career: 'ì˜ˆìˆ ê°€, ë””ìì´ë„ˆ, ìƒë‹´ì‚¬, êµì‚¬',
        love: 'ê°ì„±ì ì´ë©° ìƒëŒ€ë°©ì˜ ë§ˆìŒì„ ì˜ ì½ìŠµë‹ˆë‹¤',
        health: 'ê°„(è‚), ì‹ ê²½ê³„ ì£¼ì˜',
        lucky: 'ë´„(æ˜¥), ë™ìª½(æ±)' },
    2: { name: 'ë³‘í™”(ä¸™ç«)', symbol: 'â˜€ï¸', nature: 'íƒœì–‘, í° ë¶ˆ',
        personality: 'ë°ê³  í™”ë ¤í•œ ì„±ê²©ìœ¼ë¡œ ì£¼ë³€ì„ í™˜í•˜ê²Œ ë°íˆëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. ì—´ì •ì ì´ê³  í™œë™ì ì´ë©° í‘œí˜„ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ë‚™ì²œì ì´ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ë„˜ì¹˜ì§€ë§Œ, ë•Œë¡œëŠ” ë‹¤í˜ˆì§ˆì ì´ê³  ê¸‰í•œ ë©´ì´ ìˆìŠµë‹ˆë‹¤. íƒœì–‘ì²˜ëŸ¼ ëª¨ë‘ì—ê²Œ ë”°ëœ»í•¨ì„ ì¤ë‹ˆë‹¤.',
        career: 'ë°©ì†¡ì¸, ì—°ì˜ˆì¸, ê°•ì‚¬, ë§ˆì¼€í„°',
        love: 'ì ê·¹ì ì´ë©° ì‚¬ë‘ì— ìˆì–´ ëœ¨ê±°ìš´ ì—´ì •ì„ ë³´ì…ë‹ˆë‹¤',
        health: 'ì‹¬ì¥(å¿ƒ), ì†Œì¥(å°è…¸) ì£¼ì˜',
        lucky: 'ì—¬ë¦„(å¤), ë‚¨ìª½(å—)' },
    3: { name: 'ì •í™”(ä¸ç«)', symbol: 'ğŸ•¯ï¸', nature: 'ì´›ë¶ˆ, ë³„ë¹›',
        personality: 'ì€ì€í•˜ê³  ì§€ì ì¸ ë§¤ë ¥ì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ë‚´ë©´ì´ ë”°ëœ»í•˜ê³  ë°°ë ¤ì‹¬ì´ ê¹Šìœ¼ë©°, ì§ê´€ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì¡°ìš©í•˜ì§€ë§Œ ê¹Šì€ í†µì°°ë ¥ìœ¼ë¡œ í•µì‹¬ì„ ê¿°ëš«ìŠµë‹ˆë‹¤. ì´›ë¶ˆì²˜ëŸ¼ ì–´ë‘  ì†ì—ì„œ ë¹›ì„ ë°œí•˜ë©°, í•™ë¬¸ê³¼ ì˜ˆìˆ ì— ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.',
        career: 'ì—°êµ¬ì, í•™ì, ì‘ê°€, ì¢…êµì¸',
        love: 'ê¹Šì€ ë‚´ë©´ì˜ êµê°ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤',
        health: 'ì‹¬ì¥(å¿ƒ), ëˆˆ(ç›®) ì£¼ì˜',
        lucky: 'ì—¬ë¦„(å¤), ë‚¨ìª½(å—)' },
    4: { name: 'ë¬´í† (æˆŠåœŸ)', symbol: 'â›°ï¸', nature: 'ì‚°, í° ë•…, ì œë°©',
        personality: 'ë“¬ì§í•˜ê³  í¬ìš©ë ¥ì´ í° ì„±ê²©ì…ë‹ˆë‹¤. ì‚°ì²˜ëŸ¼ ë¬µì§í•˜ê³  ì•ˆì •ì ì´ë©°, ë„“ì€ ëŒ€ì§€ì²˜ëŸ¼ ëª¨ë“  ê²ƒì„ í’ˆì–´ì£¼ëŠ” ë„ˆê·¸ëŸ¬ì›€ì´ ìˆìŠµë‹ˆë‹¤. ì‹ ë¢°ê°ì„ ì£¼ë©° ì£¼ë³€ ì‚¬ëŒë“¤ì˜ ì¤‘ì‹¬ì´ ë©ë‹ˆë‹¤. ë•Œë¡œëŠ” ë³€í™”ì— ë‘”ê°í•˜ê³  ëŠë¦° ë©´ì´ ìˆìŠµë‹ˆë‹¤.',
        career: 'ë¶€ë™ì‚°, ê±´ì¶•, ë†ì—…, ì¤‘ê°œì—…',
        love: 'ì•ˆì •ì ì´ê³  ë¯¿ìŒì§í•œ íŒŒíŠ¸ë„ˆì…ë‹ˆë‹¤',
        health: 'ìœ„(èƒƒ), ë¹„ì¥(è„¾) ì£¼ì˜',
        lucky: 'í™˜ì ˆê¸°(åœŸç”¨), ì¤‘ì•™' },
    5: { name: 'ê¸°í† (å·±åœŸ)', symbol: 'ğŸŒ¾', nature: 'ë°­, ë…¼, ì •ì›',
        personality: 'ì„¬ì„¸í•˜ê³  ì‹¤ë¦¬ì ì¸ ì„±ê²©ì…ë‹ˆë‹¤. ë°­ì²˜ëŸ¼ ë§Œë¬¼ì„ ê¸°ë¥´ëŠ” ì–‘ìœ¡ì˜ í˜ì´ ìˆìœ¼ë©°, ê¼¼ê¼¼í•˜ê³  ì‹¤ìš©ì ì…ë‹ˆë‹¤. ê²¸ì†í•˜ê³  ë´‰ì‚¬ì •ì‹ ì´ ê°•í•˜ë©°, ì‘ì€ ê²ƒë„ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ë”°ëœ»í•œ ë§ˆìŒì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.',
        career: 'êµìœ¡ì, ìš”ë¦¬ì‚¬, ë†ì—…, ì„œë¹„ìŠ¤ì—…',
        love: 'í—Œì‹ ì ì´ë©° ê°€ì •ì ì¸ ì„±í–¥ì´ ê°•í•©ë‹ˆë‹¤',
        health: 'ìœ„(èƒƒ), ì†Œí™”ê¸° ì£¼ì˜',
        lucky: 'í™˜ì ˆê¸°(åœŸç”¨), ì¤‘ì•™' },
    6: { name: 'ê²½ê¸ˆ(åºšé‡‘)', symbol: 'âš”ï¸', nature: 'ì‡ , ì¹¼, ë°”ìœ„',
        personality: 'ê°•ì¸í•˜ê³  ê²°ë‹¨ë ¥ ìˆëŠ” ì„±ê²©ì…ë‹ˆë‹¤. ì‡ ì²˜ëŸ¼ ë‹¨ë‹¨í•˜ê³  ì¹¼ì²˜ëŸ¼ ë‚ ì¹´ë¡œìš´ íŒë‹¨ë ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì˜ë¦¬ê°€ ìˆê³  ì •ì˜ê°ì´ ê°•í•˜ë©°, ëª©í‘œë¥¼ í–¥í•´ ê³¼ê°í•˜ê²Œ ëŒì§„í•©ë‹ˆë‹¤. ë•Œë¡œëŠ” ì§€ë‚˜ì¹˜ê²Œ ê°•í•´ì„œ ë¶€ë”ªí˜ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        career: 'êµ°ì¸, ê²€ì°°, ì™¸ê³¼ì˜ì‚¬, ì—”ì§€ë‹ˆì–´',
        love: 'ì§ì„ ì ì´ë©° í•œë²ˆ ê²°ì •í•˜ë©´ ë°€ì–´ë¶™ì…ë‹ˆë‹¤',
        health: 'í(è‚º), ëŒ€ì¥(å¤§è…¸) ì£¼ì˜',
        lucky: 'ê°€ì„(ç§‹), ì„œìª½(è¥¿)' },
    7: { name: 'ì‹ ê¸ˆ(è¾›é‡‘)', symbol: 'ğŸ’', nature: 'ë³´ì„, ê¸ˆì€, ë°”ëŠ˜',
        personality: 'ì„¸ë ¨ë˜ê³  ì˜ˆë¯¼í•œ ê°ì„±ì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ë³´ì„ì²˜ëŸ¼ ë¹›ë‚˜ëŠ” ë§¤ë ¥ì´ ìˆìœ¼ë©°, ë¯¸ì  ê°ê°ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì™„ë²½ì£¼ì˜ì  ì„±í–¥ì´ ìˆê³ , ë‚ ì¹´ë¡œìš´ í†µì°°ë ¥ìœ¼ë¡œ ë³¸ì§ˆì„ ê¿°ëš«ìŠµë‹ˆë‹¤. ì˜ˆë¯¼í•˜ì—¬ ìƒì²˜ë¥¼ ì˜ ë°›ê¸°ë„ í•©ë‹ˆë‹¤.',
        career: 'ë³´ì„ìƒ, ê¸ˆìœµ, ì˜ˆìˆ ê°€, IT ì „ë¬¸ê°€',
        love: 'ì´ìƒì´ ë†’ê³  ë¡œë§¨í‹±í•œ ì—°ì• ë¥¼ í•©ë‹ˆë‹¤',
        health: 'í(è‚º), ê¸°ê´€ì§€ ì£¼ì˜',
        lucky: 'ê°€ì„(ç§‹), ì„œìª½(è¥¿)' },
    8: { name: 'ì„ìˆ˜(å£¬æ°´)', symbol: 'ğŸŒŠ', nature: 'ë°”ë‹¤, ê°•, í° ë¬¼',
        personality: 'ì§€í˜œë¡­ê³  í¬ìš©ë ¥ì´ í° ì„±ê²©ì…ë‹ˆë‹¤. ë°”ë‹¤ì²˜ëŸ¼ ë„“ê³  ê¹Šì€ ë§ˆìŒì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì–´ë–¤ ê²ƒì´ë“  ìˆ˜ìš©í•˜ëŠ” ê´€ëŒ€í•¨ì´ ìˆìŠµë‹ˆë‹¤. í™œë™ì ì´ë©° ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³ , ê°•í•œ ì¶”ì§„ë ¥ìœ¼ë¡œ ëª©í‘œë¥¼ ë‹¬ì„±í•©ë‹ˆë‹¤.',
        career: 'ë¬´ì—­, ìœ í†µ, ì—¬í–‰ì—…, ì² í•™ì',
        love: 'ììœ ë¡œìš°ë©´ì„œë„ ê¹Šì€ ì‚¬ë‘ì„ í•©ë‹ˆë‹¤',
        health: 'ì‹ ì¥(è…), ë°©ê´‘(è†€èƒ±) ì£¼ì˜',
        lucky: 'ê²¨ìš¸(å†¬), ë¶ìª½(åŒ—)' },
    9: { name: 'ê³„ìˆ˜(ç™¸æ°´)', symbol: 'ğŸ’§', nature: 'ì´ìŠ¬, ë¹„, ì‹œëƒ‡ë¬¼',
        personality: 'ì§€ì ì´ê³  ì„¬ì„¸í•œ ì„±ê²©ì…ë‹ˆë‹¤. ì´ìŠ¬ì²˜ëŸ¼ ë§‘ê³  ìˆœìˆ˜í•œ ë§ˆìŒì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì§ê´€ë ¥ê³¼ ì˜ê°ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì¡°ìš©í•˜ì§€ë§Œ ê¹Šì€ ì‚¬ê³ ë ¥ì„ ê°€ì§€ê³  ìˆê³ , í•™ë¬¸ê³¼ ì˜ˆìˆ ì— ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤. ê°ì„±ì´ í’ë¶€í•˜ê³  ë°°ë ¤ì‹¬ì´ ê¹ŠìŠµë‹ˆë‹¤.',
        career: 'í•™ì, ì—°êµ¬ì›, ì˜ˆìˆ ê°€, ì‹¬ë¦¬ìƒë‹´',
        love: 'ì„¬ì„¸í•˜ë©° ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ” ë°°ë ¤ë¥¼ í•©ë‹ˆë‹¤',
        health: 'ì‹ ì¥(è…), ë¹„ë‡¨ê¸° ì£¼ì˜',
        lucky: 'ê²¨ìš¸(å†¬), ë¶ìª½(åŒ—)' }
};

// ===== UI í•¨ìˆ˜ =====
function selectGender(btn) {
    document.querySelectorAll('.gender-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
}

// í¼ ì´ˆê¸°í™”
(function initForm() {
    const yearSel = document.getElementById('year');
    const monthSel = document.getElementById('month');
    const daySel = document.getElementById('day');
    const currentYear = new Date().getFullYear();

    for (let y = currentYear; y >= 1920; y--) {
        yearSel.add(new Option(y + 'ë…„', y));
    }
    yearSel.value = 1990;

    for (let m = 1; m <= 12; m++) {
        monthSel.add(new Option(m + 'ì›”', m));
    }

    for (let d = 1; d <= 31; d++) {
        daySel.add(new Option(d + 'ì¼', d));
    }
})();

// ===== ë¶„ì„ ì‹¤í–‰ =====
function analyze() {
    const year = parseInt(document.getElementById('year').value);
    const month = parseInt(document.getElementById('month').value);
    const day = parseInt(document.getElementById('day').value);
    const hourIdx = parseInt(document.getElementById('hour').value);
    const gender = document.querySelector('.gender-btn.active').dataset.gender;

    // ì—°ì£¼
    const yearP = getYearPillar(year, month, day);
    // ì›”ì£¼
    const monthP = getMonthPillar(yearP.gan, month, day);
    // ì¼ì£¼
    const dayP = getDayPillar(year, month, day);
    // ì‹œì£¼
    let hourP = null;
    if (hourIdx >= 0) {
        const hourGan = getHourGan(dayP.gan, hourIdx);
        hourP = { gan: hourGan, ji: hourIdx };
    }

    // ì˜¤í–‰ ê³„ì‚°
    const elements = [0, 0, 0, 0, 0]; // ëª©,í™”,í† ,ê¸ˆ,ìˆ˜
    elements[CHEONGAN_ELEMENT[yearP.gan]]++;
    elements[JIJI_ELEMENT[yearP.ji]]++;
    elements[CHEONGAN_ELEMENT[monthP.gan]]++;
    elements[JIJI_ELEMENT[monthP.ji]]++;
    elements[CHEONGAN_ELEMENT[dayP.gan]]++;
    elements[JIJI_ELEMENT[dayP.ji]]++;
    if (hourP) {
        elements[CHEONGAN_ELEMENT[hourP.gan]]++;
        elements[JIJI_ELEMENT[hourP.ji]]++;
    }

    const totalElements = elements.reduce((a, b) => a + b, 0);

    // ê²°ê³¼ í‘œì‹œ
    renderIlgan(dayP.gan);
    renderPillars(yearP, monthP, dayP, hourP);
    renderOhaeng(elements, totalElements);
    renderPersonality(dayP.gan, elements);
    renderDetail(dayP.gan, yearP, monthP, dayP, hourP, elements, gender);
    render2026Fortune(dayP.gan, dayP.ji, elements, gender);
    renderLifetimeFortune(dayP.gan, dayP.ji, yearP.gan, monthP.gan, monthP.ji, elements, gender, year);

    document.getElementById('result').style.display = 'block';
    document.getElementById('result').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function renderIlgan(ganIdx) {
    const data = ILGAN_DATA[ganIdx];
    const elIdx = CHEONGAN_ELEMENT[ganIdx];
    document.getElementById('ilganBox').innerHTML = `
        <div class="ilgan-char" style="color:${ELEMENT_COLORS[elIdx]}">${data.symbol} ${CHEONGAN_HANJA[ganIdx]}</div>
        <div class="ilgan-info">
            <h3 style="color:${ELEMENT_COLORS[elIdx]}">${data.name}</h3>
            <p>${data.nature}</p>
            <p style="margin-top:4px;font-size:12px;color:var(--text-muted)">${CHEONGAN_YINYANG[ganIdx]}(${ganIdx % 2 === 0 ? 'é™½' : 'é™°'}) Â· ${ELEMENT_NAMES[elIdx]}</p>
        </div>
    `;
}

function renderPillars(yearP, monthP, dayP, hourP) {
    const pillars = [
        { label: 'ì‹œì£¼', hanja: 'æ™‚æŸ±', p: hourP },
        { label: 'ì¼ì£¼', hanja: 'æ—¥æŸ±', p: dayP },
        { label: 'ì›”ì£¼', hanja: 'æœˆæŸ±', p: monthP },
        { label: 'ì—°ì£¼', hanja: 'å¹´æŸ±', p: yearP },
    ];

    let html = '';
    pillars.forEach(({ label, hanja, p }) => {
        if (!p) {
            html += `<div class="pillar" style="opacity:0.4">
                <div class="pillar-label">${label}</div>
                <div class="pillar-hanja">${hanja}</div>
                <div class="pillar-char serif" style="color:var(--text-muted)">?</div>
                <div class="divider"></div>
                <div class="pillar-char serif" style="color:var(--text-muted)">?</div>
                <div class="pillar-name">ì‹œê°„ ë¯¸ì…ë ¥</div>
            </div>`;
            return;
        }
        const ganEl = CHEONGAN_ELEMENT[p.gan];
        const jiEl = JIJI_ELEMENT[p.ji];
        html += `<div class="pillar">
            <div class="pillar-label">${label}</div>
            <div class="pillar-hanja">${hanja}</div>
            <div class="pillar-char serif" style="color:${ELEMENT_COLORS[ganEl]}">${CHEONGAN_HANJA[p.gan]}</div>
            <div class="pillar-name">${CHEONGAN[p.gan]} Â· ${ELEMENT_SHORT[ganEl]}</div>
            <span class="pillar-element ${ELEMENT_CLASSES[ganEl]}">${ELEMENT_NAMES[ganEl]}</span>
            <div class="divider"></div>
            <div class="pillar-char serif" style="color:${ELEMENT_COLORS[jiEl]}">${JIJI_HANJA[p.ji]}</div>
            <div class="pillar-name">${JIJI[p.ji]} Â· ${ELEMENT_SHORT[jiEl]}</div>
            <span class="pillar-element ${ELEMENT_CLASSES[jiEl]}">${ELEMENT_NAMES[jiEl]}</span>
        </div>`;
    });

    document.getElementById('pillarsGrid').innerHTML = html;
}

function renderOhaeng(elements, total) {
    const maxEl = Math.max(...elements);
    let html = '';
    const names = ['ğŸŒ³ ëª©(æœ¨)', 'ğŸ”¥ í™”(ç«)', 'ğŸ”ï¸ í† (åœŸ)', 'âš”ï¸ ê¸ˆ(é‡‘)', 'ğŸ’§ ìˆ˜(æ°´)'];
    elements.forEach((count, i) => {
        const pct = total > 0 ? Math.round(count / total * 100) : 0;
        const width = maxEl > 0 ? Math.max(count / maxEl * 100, 5) : 5;
        html += `<div class="ohaeng-row">
            <div class="ohaeng-label" style="color:${ELEMENT_COLORS[i]}">${names[i]}</div>
            <div class="ohaeng-bar-bg">
                <div class="ohaeng-bar ${BAR_CLASSES[i]}" style="width:${width}%">${pct}%</div>
            </div>
            <div class="ohaeng-count" style="color:${ELEMENT_COLORS[i]}">${count}</div>
        </div>`;
    });
    document.getElementById('ohaengBars').innerHTML = html;
}

function renderPersonality(ganIdx, elements) {
    const data = ILGAN_DATA[ganIdx];
    const maxEl = elements.indexOf(Math.max(...elements));
    const minEl = elements.indexOf(Math.min(...elements));

    let extra = '';
    if (elements[maxEl] >= 3) {
        extra += `<br><br>ì˜¤í–‰ì—ì„œ <strong style="color:${ELEMENT_COLORS[maxEl]}">${ELEMENT_NAMES[maxEl]}</strong>ì´ ê°•í•˜ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. `;
        const strongTraits = ['ì„±ì¥ê³¼ ë°œì „ì— ëŒ€í•œ ìš•êµ¬ê°€ í¬ê³  ì¸ìí•œ ì„±í’ˆ', 'ì—´ì •ê³¼ ì˜ˆì˜ê°€ ë„˜ì¹˜ë©° í‘œí˜„ë ¥ì´ ë›°ì–´ë‚¨', 'ì•ˆì •ì„ ì¶”êµ¬í•˜ê³  ì‹ ë¢°ê°ì´ ê°•í•¨', 'ê²°ë‹¨ë ¥ê³¼ ì •ì˜ê°ì´ ë›°ì–´ë‚¨', 'ì§€í˜œë¡­ê³  ìœ ì—°í•œ ì‚¬ê³ ë¥¼ í•©ë‹ˆë‹¤'];
        extra += strongTraits[maxEl] + '.';
    }
    if (elements[minEl] === 0) {
        extra += `<br><br>âš ï¸ <strong style="color:${ELEMENT_COLORS[minEl]}">${ELEMENT_NAMES[minEl]}</strong>ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. `;
        const weakAdvice = ['ì¸ë‚´ì‹¬ì„ ê¸°ë¥´ê³  ìì—°ê³¼ ê°€ê¹Œì´í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤', 'ì—´ì •ê³¼ í™œë ¥ì„ ë³´ì¶©í•˜ì„¸ìš”. ìš´ë™ì´ ë„ì›€ë©ë‹ˆë‹¤', 'ì•ˆì •ê°ì„ ì°¾ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤', 'ê²°ë‹¨ë ¥ì„ ê¸°ë¥´ê³  ìê¸°ì£¼ì¥ì„ ë¶„ëª…íˆ í•˜ì„¸ìš”', 'ìœ ì—°í•œ ì‚¬ê³ ì™€ ì§€í˜œë¥¼ ê¸°ë¥´ì„¸ìš”'];
        extra += weakAdvice[minEl] + '.';
    }

    document.getElementById('personalityText').innerHTML = data.personality + extra;
}

function renderDetail(ganIdx, yearP, monthP, dayP, hourP, elements, gender) {
    const data = ILGAN_DATA[ganIdx];
    const yinyang = CHEONGAN_YINYANG[ganIdx] === 'ì–‘' ? 'é™½' : 'é™°';

    // ìš©ì‹  (ê°„ì†Œí™”: ê°€ì¥ ì•½í•œ ì˜¤í–‰)
    const minEl = elements.indexOf(Math.min(...elements));

    // 12ìš´ì„± (ì¼ì§€ ê¸°ì¤€ ê°„ì†Œí™”)
    const unsung12 = ['ì ˆ','íƒœ','ì–‘','ì¥ìƒ','ëª©ìš•','ê´€ëŒ€','ê±´ë¡','ì œì™•','ì‡ ','ë³‘','ì‚¬','ë¬˜'];
    const unsungIdx = (dayP.ji - dayP.gan * 12 / 10 + 120) % 12;
    const unsungName = unsung12[Math.floor(unsungIdx) % 12];

    let html = `
        <div class="analysis-item">
            <div class="analysis-item-title">ğŸ’¼ ì í•©í•œ ì§ì—…</div>
            <div class="analysis-item-text">${data.career}</div>
        </div>
        <div class="analysis-item">
            <div class="analysis-item-title">â¤ï¸ ì—°ì•  ì„±í–¥</div>
            <div class="analysis-item-text">${data.love}</div>
        </div>
        <div class="analysis-item">
            <div class="analysis-item-title">ğŸ¥ ê±´ê°• ì£¼ì˜</div>
            <div class="analysis-item-text">${data.health}</div>
        </div>
        <div class="analysis-item">
            <div class="analysis-item-title">ğŸ€ ê¸¸ìš´ ë°©í–¥</div>
            <div class="analysis-item-text">${data.lucky}</div>
        </div>
        <div class="analysis-item">
            <div class="analysis-item-title">âš–ï¸ ìŒì–‘</div>
            <div class="analysis-item-text">${CHEONGAN_YINYANG[ganIdx]}(${yinyang}) â€” ${ganIdx % 2 === 0 ? 'ì ê·¹ì ì´ê³  ì™¸í–¥ì ì¸ ê¸°ìš´' : 'ë‚´ë©´ì ì´ê³  ìˆ˜ìš©ì ì¸ ê¸°ìš´'}</div>
        </div>
        <div class="analysis-item">
            <div class="analysis-item-title">ğŸ¯ ìš©ì‹  (ç”¨ç¥)</div>
            <div class="analysis-item-text" style="color:${ELEMENT_COLORS[minEl]}">
                ${ELEMENT_NAMES[minEl]} â€” ë¶€ì¡±í•œ ì˜¤í–‰ì„ ë³´ì¶©í•˜ë©´ ìš´ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤
            </div>
        </div>
    `;

    document.getElementById('detailGrid').innerHTML = html;
}

// ===== 2026ë…„ ë³‘ì˜¤(ä¸™åˆ)ë…„ ìš´ì„¸ ë¶„ì„ =====
// 2026ë…„: ì²œê°„ ä¸™(ë³‘í™”/ì–‘í™”), ì§€ì§€ åˆ(ì˜¤í™”/ì–‘í™”) â†’ ë¶ˆì˜ í•´
// ì‹­ì„±(åæ˜Ÿ) ê´€ê³„: ì¼ê°„ê³¼ ì„¸ìš´ ì²œê°„ì˜ ê´€ê³„

function getTenStar(dayGan, targetGan) {
    const dayEl = CHEONGAN_ELEMENT[dayGan];
    const targetEl = CHEONGAN_ELEMENT[targetGan];
    const daySame = dayGan % 2; // 0=ì–‘, 1=ìŒ
    const targetSame = targetGan % 2;
    const samePolarity = daySame === targetSame;

    // ì˜¤í–‰ ìƒìƒìƒê·¹ ê´€ê³„
    // ìƒ(ç”Ÿ): ëª©â†’í™”â†’í† â†’ê¸ˆâ†’ìˆ˜â†’ëª©
    // ê·¹(å…‹): ëª©â†’í† â†’ìˆ˜â†’í™”â†’ê¸ˆâ†’ëª©

    if (dayEl === targetEl) {
        return samePolarity ? { name: 'ë¹„ê²¬(æ¯”è‚©)', desc: 'ê²½ìŸê³¼ ìë¦½ì˜ í•´', type: 'peer' }
                           : { name: 'ê²ì¬(åŠ«è²¡)', desc: 'í˜‘ë ¥ê³¼ ê²½ìŸì˜ í•´', type: 'peer' };
    }

    // ë‚´ê°€ ìƒí•˜ëŠ” ê²ƒ = ì‹ìƒ
    if ((dayEl + 1) % 5 === targetEl) {
        return samePolarity ? { name: 'ì‹ì‹ (é£Ÿç¥)', desc: 'ì°½ì‘ê³¼ í‘œí˜„ì˜ í•´', type: 'output' }
                           : { name: 'ìƒê´€(å‚·å®˜)', desc: 'ë³€í™”ì™€ ë„ì „ì˜ í•´', type: 'output' };
    }

    // ë‚´ê°€ ê·¹í•˜ëŠ” ê²ƒ = ì¬ì„±
    if ((dayEl + 2) % 5 === targetEl) {
        return samePolarity ? { name: 'í¸ì¬(åè²¡)', desc: 'íˆ¬ìì™€ ê¸°íšŒì˜ í•´', type: 'wealth' }
                           : { name: 'ì •ì¬(æ­£è²¡)', desc: 'ì•ˆì •ì  ì¬ë¬¼ì˜ í•´', type: 'wealth' };
    }

    // ë‚˜ë¥¼ ê·¹í•˜ëŠ” ê²ƒ = ê´€ì„±
    if ((dayEl + 3) % 5 === targetEl) {
        return samePolarity ? { name: 'í¸ê´€(åå®˜)', desc: 'ë„ì „ê³¼ ì„±ì·¨ì˜ í•´', type: 'power' }
                           : { name: 'ì •ê´€(æ­£å®˜)', desc: 'ëª…ì˜ˆì™€ ìŠ¹ì§„ì˜ í•´', type: 'power' };
    }

    // ë‚˜ë¥¼ ìƒí•˜ëŠ” ê²ƒ = ì¸ì„±
    if ((dayEl + 4) % 5 === targetEl) {
        return samePolarity ? { name: 'í¸ì¸(åå°)', desc: 'í•™ë¬¸ê³¼ ê¹¨ë‹¬ìŒì˜ í•´', type: 'resource' }
                           : { name: 'ì •ì¸(æ­£å°)', desc: 'ì§€í˜œì™€ ì•ˆì •ì˜ í•´', type: 'resource' };
    }

    return { name: 'ë¹„ê²¬', desc: 'ìë¦½ì˜ í•´', type: 'peer' };
}

function render2026Fortune(dayGan, dayJi, elements, gender) {
    // 2026 ë³‘ì˜¤ë…„: ì²œê°„ ä¸™(2), ì§€ì§€ åˆ(6)
    const yearGan2026 = 2; // ë³‘(ä¸™)
    const yearJi2026 = 6;  // ì˜¤(åˆ)

    const tenStar = getTenStar(dayGan, yearGan2026);
    const dayElIdx = CHEONGAN_ELEMENT[dayGan];

    // ì¼ê°„ê³¼ ì„¸ìš´ì˜ ì˜¤í–‰ ê´€ê³„ë¡œ ì¢…í•© ì ìˆ˜ ê³„ì‚°
    const yearEl = 1; // ë³‘ì˜¤ = í™”(ç«)

    // ìƒìƒ/ìƒê·¹ ê¸°ë°˜ ì ìˆ˜
    let baseScore = 65;
    // ë‚´ê°€ ìƒí•˜ëŠ” ê²ƒ (ì‹ìƒ) â†’ ì—ë„ˆì§€ ì†Œëª¨, í‘œí˜„ë ¥ ì¦ê°€
    if ((dayElIdx + 1) % 5 === yearEl) baseScore = 72;
    // ë‚´ê°€ ê·¹í•˜ëŠ” ê²ƒ (ì¬ì„±) â†’ ì¬ë¬¼ ê¸°íšŒ
    if ((dayElIdx + 2) % 5 === yearEl) baseScore = 78;
    // ë‚˜ë¥¼ ê·¹í•˜ëŠ” ê²ƒ (ê´€ì„±) â†’ ì••ë°•, ì„±ì¥
    if ((dayElIdx + 3) % 5 === yearEl) baseScore = 60;
    // ë‚˜ë¥¼ ìƒí•˜ëŠ” ê²ƒ (ì¸ì„±) â†’ ë„ì›€, ì•ˆì •
    if ((dayElIdx + 4) % 5 === yearEl) baseScore = 80;
    // ê°™ì€ ì˜¤í–‰ (ë¹„ê²) â†’ ê²½ìŸ, ìë¦½
    if (dayElIdx === yearEl) baseScore = 68;

    // ì¼ì§€ì™€ ì„¸ìš´ì§€ì§€ ê´€ê³„ ë³´ì •
    // ì˜¤(åˆ)ì™€ ì¼ì§€ ê´€ê³„
    const jiRelation = getJijiRelation(dayJi, yearJi2026);
    baseScore += jiRelation.scoreAdj;

    // ì‚¬ì£¼ ì˜¤í–‰ ê· í˜• ë³´ì •
    const minEl = Math.min(...elements);
    const maxEl = Math.max(...elements);
    if (elements[yearEl] === 0) baseScore += 5; // ë¶€ì¡±í•œ í™”ë¥¼ ë³´ì¶©
    if (elements[yearEl] >= 3) baseScore -= 5; // ì´ë¯¸ í™”ê°€ ê³¼ë‹¤

    baseScore = Math.max(40, Math.min(95, baseScore));

    // ì„¸ë¶€ ì ìˆ˜
    const scores = calcDetailScores(dayGan, dayJi, elements, tenStar.type, baseScore);

    // ì›”ë³„ ìš´ì„¸
    const monthlyFortune = calcMonthlyFortune(dayGan, dayJi, elements);

    // ë Œë”ë§
    // Header
    document.getElementById('fortuneYearHeader').innerHTML = `
        <div class="fortune-year-char">ğŸ´ ä¸™åˆ</div>
        <div class="fortune-year-info">
            <h3>2026ë…„ ë³‘ì˜¤(ä¸™åˆ)ë…„ â€” ${tenStar.name}</h3>
            <p>${tenStar.desc} Â· ë¶‰ì€ ë§ì˜ í•´ Â· í™”(ç«)ê¸°ìš´ì´ ê°•í•œ í•´</p>
            <p style="margin-top:4px;font-size:12px;color:var(--text-muted)">ì„¸ìš´ ì²œê°„: ä¸™(ë³‘í™”) Â· ì„¸ìš´ ì§€ì§€: åˆ(ì˜¤í™”) Â· ${jiRelation.text}</p>
        </div>
    `;

    // Score
    const scoreColor = baseScore >= 75 ? 'var(--gold)' : baseScore >= 60 ? 'var(--wood)' : baseScore >= 45 ? 'var(--text-secondary)' : 'var(--fire)';
    const scoreGrade = baseScore >= 80 ? 'ëŒ€ê¸¸(å¤§å‰)' : baseScore >= 70 ? 'ê¸¸(å‰)' : baseScore >= 55 ? 'í‰(å¹³)' : baseScore >= 45 ? 'ì†Œí‰(å°å‡¶)' : 'ì£¼ì˜(æ³¨æ„)';

    document.getElementById('fortuneScore').innerHTML = `
        <div class="score-circle" style="border-color:${scoreColor};color:${scoreColor}">
            <div class="score-num">${baseScore}</div>
            <div class="score-label">${scoreGrade}</div>
        </div>
        <div class="score-detail">
            ${renderScoreRow('ğŸ’° ì¬ë¬¼ìš´', scores.wealth, scores.wealth >= 70 ? 'bar-excellent' : scores.wealth >= 55 ? 'bar-good' : 'bar-normal')}
            ${renderScoreRow('ğŸ’¼ ì§ì¥ìš´', scores.career, scores.career >= 70 ? 'bar-excellent' : scores.career >= 55 ? 'bar-good' : 'bar-normal')}
            ${renderScoreRow('â¤ï¸ ì• ì •ìš´', scores.love, scores.love >= 70 ? 'bar-excellent' : scores.love >= 55 ? 'bar-good' : 'bar-normal')}
            ${renderScoreRow('ğŸ¥ ê±´ê°•ìš´', scores.health, scores.health >= 70 ? 'bar-good' : scores.health >= 55 ? 'bar-normal' : 'bar-caution')}
            ${renderScoreRow('ğŸ“ í•™ì—…ìš´', scores.study, scores.study >= 70 ? 'bar-excellent' : scores.study >= 55 ? 'bar-good' : 'bar-normal')}
            ${renderScoreRow('ğŸ¤ ëŒ€ì¸ìš´', scores.social, scores.social >= 70 ? 'bar-excellent' : scores.social >= 55 ? 'bar-good' : 'bar-normal')}
        </div>
    `;

    // Monthly
    const monthIcons = ['â„ï¸','ğŸŒ¸','ğŸŒ¸','ğŸŒ¿','ğŸŒ¿','â˜€ï¸','â˜€ï¸','ğŸ‚','ğŸ‚','ğŸ‚','â„ï¸','â„ï¸'];
    let monthHtml = '<div class="section-title serif" style="font-size:16px;">ğŸ“… 2026ë…„ ì›”ë³„ ìš´ì„¸</div><div class="monthly-grid">';
    monthlyFortune.forEach((m, i) => {
        const luckClass = m.score >= 80 ? 'luck-excellent' : m.score >= 65 ? 'luck-good' : m.score >= 50 ? 'luck-normal' : m.score >= 40 ? 'luck-caution' : 'luck-difficult';
        const luckText = m.score >= 80 ? 'ëŒ€ê¸¸' : m.score >= 65 ? 'ê¸¸' : m.score >= 50 ? 'í‰' : m.score >= 40 ? 'ì†Œí‰' : 'ì£¼ì˜';
        monthHtml += `<div class="month-card">
            <div class="month-num">${i + 1}ì›”</div>
            <div class="month-icon">${monthIcons[i]}</div>
            <div class="month-luck ${luckClass}">${luckText} ${m.score}ì </div>
            <div class="month-desc">${m.desc}</div>
        </div>`;
    });
    monthHtml += '</div>';
    document.getElementById('fortuneMonthly').innerHTML = monthHtml;

    // Advice
    const advice = getFortuneAdvice(dayGan, tenStar.type, elements, baseScore, scores);
    document.getElementById('fortuneAdvice').innerHTML = `
        <div class="fortune-advice-title">ğŸ”® 2026ë…„ ì¢…í•© ì¡°ì–¸</div>
        <div class="fortune-advice-text">${advice}</div>
    `;
}

function renderScoreRow(label, score, barClass) {
    return `<div class="score-row">
        <div class="score-row-label">${label}</div>
        <div class="score-bar-bg"><div class="score-bar ${barClass}" style="width:${score}%"></div></div>
        <div class="score-row-val">${score}</div>
    </div>`;
}

function getJijiRelation(dayJi, yearJi) {
    // ê°„ì†Œí™”ëœ ì§€ì§€ ê´€ê³„ (í•©, ì¶©, í˜•, í•´)
    // åˆ ì¶©: å­(0)
    if (dayJi === 0 && yearJi === 6) return { text: 'ì¼ì§€ å­ì™€ ì„¸ìš´ åˆ â€” ìì˜¤ì¶©(å­åˆæ²–)', scoreAdj: -8 };
    if (dayJi === 6) return { text: 'ì¼ì§€ åˆì™€ ì„¸ìš´ åˆ â€” ìí˜•(è‡ªåˆ‘)', scoreAdj: -3 };
    // åˆ í•©: æœª(7) ìœ¡í•©
    if (dayJi === 7) return { text: 'ì¼ì§€ æœªì™€ ì„¸ìš´ åˆ â€” ì˜¤ë¯¸í•©(åˆæœªåˆ) ê¸¸', scoreAdj: 8 };
    // åˆ ì‚¼í•©: å¯…(2), æˆŒ(10) â€” í™”êµ­
    if (dayJi === 2) return { text: 'ì¼ì§€ å¯…ê³¼ ì„¸ìš´ åˆ â€” ì¸ì˜¤ìˆ  ì‚¼í•©(í™”êµ­)', scoreAdj: 10 };
    if (dayJi === 10) return { text: 'ì¼ì§€ æˆŒê³¼ ì„¸ìš´ åˆ â€” ì¸ì˜¤ìˆ  ì‚¼í•©(í™”êµ­)', scoreAdj: 10 };
    // åˆ í˜•: åˆ(6) ìí˜•
    // åˆ í•´: ä¸‘(1)
    if (dayJi === 1) return { text: 'ì¼ì§€ ä¸‘ê³¼ ì„¸ìš´ åˆ â€” ì¶•ì˜¤í•´(ä¸‘åˆå®³)', scoreAdj: -5 };
    // ë‚˜ë¨¸ì§€
    return { text: 'ì¼ì§€ì™€ ì„¸ìš´ì§€ì§€ â€” íŠ¹ë³„í•œ ì¶©í•© ì—†ìŒ', scoreAdj: 0 };
}

function calcDetailScores(dayGan, dayJi, elements, tenStarType, base) {
    let wealth = base, career = base, love = base, health = base, study = base, social = base;

    // ì‹­ì„± ìœ í˜•ì— ë”°ë¥¸ ë³´ì •
    switch(tenStarType) {
        case 'wealth':
            wealth += 12; career += 5; love += 3; health -= 3; study -= 2; social += 5;
            break;
        case 'power':
            career += 12; wealth += 3; love -= 2; health -= 5; study += 5; social += 3;
            break;
        case 'resource':
            study += 12; health += 5; career += 5; love += 3; wealth += 2; social += 5;
            break;
        case 'output':
            love += 8; study += 5; social += 8; career += 3; wealth -= 3; health -= 3;
            break;
        case 'peer':
            social += 5; career -= 2; wealth -= 3; love += 3; health += 3; study += 2;
            break;
    }

    // í™”(ç«) ê³¼ë‹¤ì‹œ ê±´ê°• ì£¼ì˜ (ì‹¬ì¥, í˜ˆì••)
    if (elements[1] >= 2) health -= 5;
    // í™” ë¶€ì¡±ì‹œ í™œë ¥ ë¶€ì¡±
    if (elements[1] === 0) { career += 5; health += 3; }
    // ìˆ˜(æ°´) ìˆìœ¼ë©´ í™”ë¥¼ ì œì–´ â†’ ê±´ê°• ë³´ì •
    if (elements[4] >= 1) health += 3;

    // ì¼ê°„ë³„ ë¯¸ì„¸ ë³´ì • (í™”ì˜ í•´ì— ê° ì¼ê°„ì˜ ë°˜ì‘)
    const dayEl = CHEONGAN_ELEMENT[dayGan];
    if (dayEl === 0) { career += 3; wealth += 2; } // ëª© â†’ í™”ë¥¼ ìƒí•¨ (ì„¤ê¸°, ì—ë„ˆì§€ ì†Œëª¨)
    if (dayEl === 1) { social += 5; love += 5; }   // í™” â†’ ë¹„ê², ê²½ìŸê³¼ ì—´ì •
    if (dayEl === 2) { wealth += 5; career += 3; }  // í†  â†’ í™”ê°€ ìƒí•´ì¤Œ (ì¸ì„±)
    if (dayEl === 3) { health -= 3; career += 5; }  // ê¸ˆ â†’ í™”ê°€ ê·¹í•¨ (ê´€ì„±, ì••ë°•)
    if (dayEl === 4) { study += 5; wealth += 3; }   // ìˆ˜ â†’ í™”ë¥¼ ê·¹í•¨ (ì¬ì„±, ê¸°íšŒ)

    return {
        wealth: Math.max(30, Math.min(95, Math.round(wealth))),
        career: Math.max(30, Math.min(95, Math.round(career))),
        love: Math.max(30, Math.min(95, Math.round(love))),
        health: Math.max(30, Math.min(95, Math.round(health))),
        study: Math.max(30, Math.min(95, Math.round(study))),
        social: Math.max(30, Math.min(95, Math.round(social)))
    };
}

function calcMonthlyFortune(dayGan, dayJi, elements) {
    // 2026ë…„ ì›”ë³„ ì²œê°„ì§€ì§€
    // 1ì›”(ê²½ì¸), 2ì›”(ì‹ ë¬˜), 3ì›”(ì„ì§„), 4ì›”(ê³„ì‚¬), 5ì›”(ê°‘ì˜¤), 6ì›”(ì„ë¯¸)
    // 7ì›”(ë³‘ì‹ ), 8ì›”(ì •ìœ ), 9ì›”(ë¬´ìˆ ), 10ì›”(ê¸°í•´), 11ì›”(ê²½ì), 12ì›”(ì‹ ì¶•)
    const monthGans = [6,7,8,9,0,1,2,3,4,5,6,7]; // ê²½,ì‹ ,ì„,ê³„,ê°‘,ì„,ë³‘,ì •,ë¬´,ê¸°,ê²½,ì‹ 
    const monthJis = [2,3,4,5,6,7,8,9,10,11,0,1]; // ì¸,ë¬˜,ì§„,ì‚¬,ì˜¤,ë¯¸,ì‹ ,ìœ ,ìˆ ,í•´,ì,ì¶•

    const dayEl = CHEONGAN_ELEMENT[dayGan];
    const descs = [];

    const shortDescs = {
        wealth: ['ì¬ë¬¼ ê¸°íšŒ', 'íˆ¬ì ìœ ë¦¬', 'ìˆ˜ì… ì¦ê°€', 'ì¬ë¬¼ ê¸¸'],
        career: ['ìŠ¹ì§„ ê¸°íšŒ', 'ì§ì¥ ë°œì „', 'ì‚¬ì—… í˜¸ì¡°', 'ì—…ë¬´ ìˆœíƒ„'],
        love: ['ì¸ì—° ì¢‹ìŒ', 'ë§Œë‚¨ ê¸¸', 'ì• ì • ê¹Šì–´ì§', 'ê°ì • í’ë¶€'],
        health: ['ê±´ê°• ì–‘í˜¸', 'í™œë ¥ ì¶©ë§Œ', 'ì²´ë ¥ ì¢‹ìŒ', 'ê¸°ìš´ ì¢‹ìŒ'],
        study: ['í•™ì—… ê¸¸', 'ì‹œí—˜ ìœ ë¦¬', 'ì§‘ì¤‘ë ¥ ìƒìŠ¹', 'ê¹¨ë‹¬ìŒ'],
        social: ['ê·€ì¸ ë§Œë‚¨', 'ì¸ë§¥ í™•ì¥', 'ëŒ€ì¸ ì¢‹ìŒ', 'í˜‘ë ¥ ì¢‹ìŒ'],
        caution: ['ì§€ì¶œ ì£¼ì˜', 'ê±´ê°• ì¡°ì‹¬', 'ê°ˆë“± ì£¼ì˜', 'ê³¼ë¡œ ì£¼ì˜', 'ê°ì • ì¡°ì ˆ', 'ì‹ ì¤‘íˆ']
    };

    for (let m = 0; m < 12; m++) {
        const mGan = monthGans[m];
        const mJi = monthJis[m];
        const mEl = CHEONGAN_ELEMENT[mGan];
        const mJiEl = JIJI_ELEMENT[mJi];

        let score = 65;
        let desc = '';

        // ì›”ê°„ê³¼ ì¼ê°„ ê´€ê³„
        const mTenStar = getTenStar(dayGan, mGan);

        switch(mTenStar.type) {
            case 'wealth': score += 8; desc = shortDescs.wealth[m % 4]; break;
            case 'power': score += 2; desc = shortDescs.career[m % 4]; break;
            case 'resource': score += 10; desc = shortDescs.study[m % 4]; break;
            case 'output': score += 5; desc = shortDescs.love[m % 4]; break;
            case 'peer': score += 0; desc = shortDescs.social[m % 4]; break;
        }

        // ì›”ì§€ì™€ ì¼ì§€ ì¶©í•©
        if ((mJi + 6) % 12 === dayJi) { score -= 10; desc = shortDescs.caution[m % 6]; }
        // ì‚¼í•©
        if ((mJi + dayJi) % 4 === 0 && mJi !== dayJi) score += 3;
        // ìœ¡í•©
        const yukHap = [[0,1],[2,11],[3,10],[4,9],[5,8],[6,7]];
        yukHap.forEach(([a,b]) => { if ((dayJi===a && mJi===b)||(dayJi===b && mJi===a)) score += 5; });

        // ê³„ì ˆ ë³´ì • (ë´„ ëª©, ì—¬ë¦„ í™”, ê°€ì„ ê¸ˆ, ê²¨ìš¸ ìˆ˜)
        if (m >= 0 && m <= 2 && dayEl === 0) score += 3; // ë´„ì— ëª©
        if (m >= 3 && m <= 5 && dayEl === 1) score += 3; // ì—¬ë¦„ì— í™”
        if (m >= 6 && m <= 8 && dayEl === 3) score += 3; // ê°€ì„ì— ê¸ˆ
        if (m >= 9 && m <= 11 && dayEl === 4) score += 3; // ê²¨ìš¸ì— ìˆ˜

        score = Math.max(35, Math.min(95, score));
        descs.push({ score, desc });
    }

    return descs;
}

// ===== í‰ìƒìš´ (ëŒ€ìš´) ê³„ì‚° =====
// ëŒ€ìš´: ì›”ì£¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ 10ë…„ ë‹¨ìœ„ë¡œ ìˆœí–‰/ì—­í–‰
// ë‚¨ì ì–‘ë…„ìƒ or ì—¬ì ìŒë…„ìƒ â†’ ìˆœí–‰ (ì›”ì£¼ë¶€í„° ë‹¤ìŒ ê°„ì§€ë¡œ)
// ë‚¨ì ìŒë…„ìƒ or ì—¬ì ì–‘ë…„ìƒ â†’ ì—­í–‰

function calcDaeun(yearGan, monthGan, monthJi, gender, birthYear) {
    const yearYinYang = yearGan % 2; // 0=ì–‘, 1=ìŒ
    const isForward = (gender === 'male' && yearYinYang === 0) || (gender === 'female' && yearYinYang === 1);

    // ëŒ€ìš´ ì‹œì‘ ë‚˜ì´ (ê°„ì†Œí™”: ì ˆê¸°ê¹Œì§€ ë‚¨ì€ ì¼ / 3)
    // ì‹¤ì œë¡œëŠ” ìƒì¼ë¶€í„° ë‹¤ìŒ/ì´ì „ ì ˆê¸°ê¹Œì§€ì˜ ì¼ìˆ˜ / 3
    // ê°„ì†Œí™”: í‰ê·  3~4ì„¸ì— ì‹œì‘
    const startAge = 3 + (monthGan % 4); // 3~6ì„¸ ì‚¬ì´

    const daeunList = [];
    for (let i = 0; i < 9; i++) { // 9ê°œ ëŒ€ìš´ (ì•½ 90ì„¸ê¹Œì§€)
        let gan, ji;
        if (isForward) {
            gan = (monthGan + i + 1) % 10;
            ji = (monthJi + i + 1) % 12;
        } else {
            gan = (monthGan - i - 1 + 100) % 10;
            ji = (monthJi - i - 1 + 120) % 12;
        }
        const ageFrom = startAge + i * 10;
        const ageTo = ageFrom + 9;
        const yearFrom = birthYear + ageFrom;
        const yearTo = birthYear + ageTo;

        daeunList.push({
            gan, ji, ageFrom, ageTo, yearFrom, yearTo,
            ganName: CHEONGAN[gan], jiName: JIJI[ji],
            ganHanja: CHEONGAN_HANJA[gan], jiHanja: JIJI_HANJA[ji],
            ganEl: CHEONGAN_ELEMENT[gan], jiEl: JIJI_ELEMENT[ji]
        });
    }
    return { daeunList, startAge, isForward };
}

// ëŒ€ìš´ë³„ ìš´ì„¸ ì ìˆ˜ ê³„ì‚° (ì¬ë¬¼, ê±´ê°•, ì—°ì• , ìì‹, ë°°ìš°ì, ì§ì—…, í•™ì—…)
function calcDaeunScores(dayGan, dayJi, elements, daeun) {
    const dayEl = CHEONGAN_ELEMENT[dayGan];
    const dGan = daeun.gan;
    const dJi = daeun.ji;
    const dGanEl = CHEONGAN_ELEMENT[dGan];
    const dJiEl = JIJI_ELEMENT[dJi];

    const tenStar = getTenStar(dayGan, dGan);
    let base = 62;

    // ì‹­ì„± ê¸°ë°˜ ê¸°ë³¸ ì ìˆ˜
    switch(tenStar.type) {
        case 'wealth': base = 72; break;
        case 'power': base = 66; break;
        case 'resource': base = 75; break;
        case 'output': base = 70; break;
        case 'peer': base = 60; break;
    }

    // ì§€ì§€ ì¶©í•© ë³´ì •
    const jiRel = getJijiRelation(dayJi, dJi);
    base += jiRel.scoreAdj;

    // ì˜¤í–‰ ë³´ì™„ ë³´ì •
    const minElIdx = elements.indexOf(Math.min(...elements));
    if (dGanEl === minElIdx || dJiEl === minElIdx) base += 6; // ë¶€ì¡±í•œ ì˜¤í–‰ ë³´ì¶©

    // ê³¼ë‹¤ ì˜¤í–‰ ë³´ì •
    const maxElIdx = elements.indexOf(Math.max(...elements));
    if (dGanEl === maxElIdx && dJiEl === maxElIdx) base -= 4;

    base = Math.max(35, Math.min(92, base));

    // ====== ì„¸ë¶€ ìš´ì„¸ ê³„ì‚° ======
    let wealth = base, health = base, love = base, children = base, spouse = base, career = base;

    // ì¬ë¬¼ìš´ (ì¬ì„± ê´€ë ¨)
    // ë‚´ê°€ ê·¹í•˜ëŠ” ì˜¤í–‰ì´ ì¬ì„±
    const wealthEl = (dayEl + 2) % 5;
    if (dGanEl === wealthEl || dJiEl === wealthEl) wealth += 12;
    if (tenStar.type === 'wealth') wealth += 8;
    if (tenStar.type === 'output') wealth += 3; // ì‹ìƒìƒì¬
    // ì˜¤í–‰ ê· í˜• ì¢‹ìœ¼ë©´ ì¬ë¬¼ ì•ˆì •
    const elRange = Math.max(...elements) - Math.min(...elements);
    if (elRange <= 2) wealth += 3;

    // ê±´ê°•ìš´ (ì¸ì„±, ë¹„ê² ê´€ë ¨)
    if (tenStar.type === 'resource') health += 8;
    if (tenStar.type === 'peer') health += 3;
    if (tenStar.type === 'power') health -= 5; // ê´€ì„±ì€ ìŠ¤íŠ¸ë ˆìŠ¤
    // ì¼ê°„ ì˜¤í–‰ë³„ ê±´ê°• ì•½ì 
    if (dayEl === 0 && (dGanEl === 3 || dJiEl === 3)) health -= 5; // ê¸ˆê·¹ëª©
    if (dayEl === 1 && (dGanEl === 4 || dJiEl === 4)) health -= 5; // ìˆ˜ê·¹í™”
    if (dayEl === 2 && (dGanEl === 0 || dJiEl === 0)) health -= 5; // ëª©ê·¹í† 
    if (dayEl === 3 && (dGanEl === 1 || dJiEl === 1)) health -= 5; // í™”ê·¹ê¸ˆ
    if (dayEl === 4 && (dGanEl === 2 || dJiEl === 2)) health -= 5; // í† ê·¹ìˆ˜
    if (elements[4] >= 1 && dGanEl !== 1) health += 2; // ìˆ˜ê°€ ìˆìœ¼ë©´ ì•ˆì •

    // ì—°ì• ìš´ (ì‹ìƒ, ì¬ì„± ê´€ë ¨)
    if (tenStar.type === 'output') love += 10;
    if (tenStar.type === 'wealth') love += 6;
    // ì˜¤í™”(åˆ) ë“± í™” ê³„ì—´ì€ ì—´ì •
    if (dGanEl === 1 || dJiEl === 1) love += 3;
    // ì§€ì§€ í•©ì´ë©´ ì¸ì—° ì¢‹ìŒ
    if (jiRel.scoreAdj > 0) love += 5;

    // ë°°ìš°ììš´
    // ë‚¨ì: ì¬ì„±ì´ ë°°ìš°ì, ì—¬ì: ê´€ì„±ì´ ë°°ìš°ì
    // ê°„ì†Œí™”: ì‹ìƒ/ì¬ì„±ì€ ë°°ìš°ì ê¸¸, ê´€ì„±ë„ ë°°ìš°ì ê´€ë ¨
    if (tenStar.type === 'wealth') spouse += 10;
    if (tenStar.type === 'power') spouse += 8;
    if (tenStar.type === 'output') spouse += 5;
    // ì¼ì§€ì™€ ëŒ€ìš´ì§€ì§€ í•©ì´ë©´ ë°°ìš°ì ê¸¸
    if (jiRel.scoreAdj >= 5) spouse += 8;
    if (jiRel.scoreAdj <= -5) spouse -= 6;

    // ìì‹ìš´
    // ì‹ìƒ(é£Ÿå‚·)ì´ ìì‹ â†’ ì‹ìƒ ëŒ€ìš´ì—ì„œ ìì‹ìš´ ìƒìŠ¹
    if (tenStar.type === 'output') children += 12;
    if (tenStar.type === 'resource') children += 5; // ì¸ì„±ì€ í•™ì—…ìœ¼ë¡œ ìì‹ êµìœ¡
    if (tenStar.type === 'peer') children += 3;
    // í™”(ç«)ì˜ ìƒëª…ë ¥
    if (dGanEl === 1 || dJiEl === 1) children += 3;
    if (jiRel.scoreAdj >= 5) children += 4;

    // ì§ì—…ìš´
    if (tenStar.type === 'power') career += 12; // ê´€ì„± = ì§ìœ„
    if (tenStar.type === 'wealth') career += 8;
    if (tenStar.type === 'resource') career += 5;
    if (tenStar.type === 'output') career += 3;

    return {
        total: Math.max(35, Math.min(92, Math.round(base))),
        wealth: Math.max(30, Math.min(95, Math.round(wealth))),
        health: Math.max(30, Math.min(95, Math.round(health))),
        love: Math.max(30, Math.min(95, Math.round(love))),
        children: Math.max(30, Math.min(95, Math.round(children))),
        spouse: Math.max(30, Math.min(95, Math.round(spouse))),
        career: Math.max(30, Math.min(95, Math.round(career))),
        tenStar: tenStar
    };
}

function renderLifetimeFortune(dayGan, dayJi, yearGan, monthGan, monthJi, elements, gender, birthYear) {
    const { daeunList, startAge, isForward } = calcDaeun(yearGan, monthGan, monthJi, gender, birthYear);
    const currentYear = new Date().getFullYear();
    const currentAge = currentYear - birthYear;

    // ê° ëŒ€ìš´ ì ìˆ˜ ê³„ì‚°
    const daeunScores = daeunList.map(d => calcDaeunScores(dayGan, dayJi, elements, d));

    // í˜„ì¬ ëŒ€ìš´ ì°¾ê¸°
    let currentIdx = 0;
    for (let i = 0; i < daeunList.length; i++) {
        if (currentAge >= daeunList[i].ageFrom && currentAge <= daeunList[i].ageTo) {
            currentIdx = i;
            break;
        }
        if (currentAge > daeunList[i].ageTo) currentIdx = i + 1;
    }
    if (currentIdx >= daeunList.length) currentIdx = daeunList.length - 1;

    const curDaeun = daeunList[currentIdx];
    const curScores = daeunScores[currentIdx];

    // === 1. ìƒë‹¨ ìš”ì•½ ì¹´ë“œ ===
    const bestIdx = daeunScores.reduce((best, s, i) => s.total > daeunScores[best].total ? i : best, 0);
    const bestDaeun = daeunList[bestIdx];

    document.getElementById('lifetimeSummary').innerHTML = `
        <div class="lifetime-summary-item">
            <div class="ls-label">í˜„ì¬ ëŒ€ìš´</div>
            <div class="ls-value" style="color:${ELEMENT_COLORS[curDaeun.ganEl]}">
                ${curDaeun.ganHanja}${curDaeun.jiHanja} (${curDaeun.ageFrom}~${curDaeun.ageTo}ì„¸)
            </div>
        </div>
        <div class="lifetime-summary-item">
            <div class="ls-label">ëŒ€ìš´ ë°©í–¥</div>
            <div class="ls-value" style="color:var(--gold)">${isForward ? 'ìˆœí–‰ â–¶' : 'â—€ ì—­í–‰'}</div>
        </div>
        <div class="lifetime-summary-item">
            <div class="ls-label">ìµœê³  ìš´ê¸°</div>
            <div class="ls-value" style="color:var(--gold-light)">
                ${bestDaeun.ageFrom}~${bestDaeun.ageTo}ì„¸
            </div>
        </div>
    `;

    // === 2. ëŒ€ìš´ íƒ€ì„ë¼ì¸ ===
    let timelineHtml = '';
    daeunList.forEach((d, i) => {
        const isCurrent = i === currentIdx;
        const isPast = currentAge > d.ageTo;
        const stateClass = isCurrent ? 'current' : (isPast ? 'past' : '');
        const score = daeunScores[i].total;
        const barColor = score >= 75 ? 'var(--gold)' : score >= 60 ? 'var(--wood)' : score >= 45 ? 'var(--text-secondary)' : 'var(--fire)';

        timelineHtml += `<div class="daeun-item ${stateClass}">
            <div class="daeun-box">
                <div class="daeun-age">${d.ageFrom}~${d.ageTo}ì„¸</div>
                <div class="daeun-chars" style="color:${ELEMENT_COLORS[d.ganEl]}">${d.ganHanja}${d.jiHanja}</div>
                <div class="daeun-name">${d.ganName}${d.jiName}</div>
                <span class="daeun-element-tag ${ELEMENT_CLASSES[d.ganEl]}">${ELEMENT_SHORT[d.ganEl]}</span>
                <span class="daeun-element-tag ${ELEMENT_CLASSES[d.jiEl]}">${ELEMENT_SHORT[d.jiEl]}</span>
                <div class="daeun-score-bar"><div class="daeun-score-fill" style="width:${score}%;background:${barColor}"></div></div>
            </div>
            <div style="font-size:10px;color:var(--text-muted);margin-top:4px">${d.yearFrom}~${d.yearTo}</div>
        </div>`;
    });
    document.getElementById('daeunTimeline').innerHTML = timelineHtml;

    // === 3. í˜„ì¬ ëŒ€ìš´ ìƒì„¸ (ì¬ë¬¼, ê±´ê°•, ì—°ì• , ìì‹, ë°°ìš°ììš´) ===
    function scoreBarHtml(label, icon, score) {
        const barClass = score >= 75 ? 'bar-excellent' : score >= 60 ? 'bar-good' : score >= 45 ? 'bar-normal' : 'bar-caution';
        const grade = score >= 80 ? 'ëŒ€ê¸¸' : score >= 70 ? 'ê¸¸' : score >= 55 ? 'í‰' : score >= 45 ? 'ì†Œí‰' : 'ì£¼ì˜';
        return `<div class="cd-item">
            <div class="cd-item-label">${icon} ${label}</div>
            <div style="display:flex;align-items:center;gap:8px;margin-top:4px">
                <div style="flex:1;height:8px;background:rgba(255,255,255,0.05);border-radius:4px;overflow:hidden">
                    <div class="score-bar ${barClass}" style="width:${score}%;height:100%;border-radius:4px"></div>
                </div>
                <div class="cd-item-value" style="font-size:13px;min-width:60px">${score}ì  ${grade}</div>
            </div>
        </div>`;
    }

    // ëŒ€ìš´ë³„ ì„¸ë¶€ ì¡°ì–¸
    const tenStarName = curScores.tenStar.name;
    const tenStarDesc = curScores.tenStar.desc;

    document.getElementById('currentDaeunDetail').innerHTML = `
        <h4>ğŸ“ í˜„ì¬ ëŒ€ìš´: ${curDaeun.ganHanja}${curDaeun.jiHanja} (${curDaeun.ganName}${curDaeun.jiName}) â€” ${curDaeun.ageFrom}~${curDaeun.ageTo}ì„¸</h4>
        <div style="font-size:13px;color:var(--text-secondary);margin-bottom:12px">
            ëŒ€ìš´ ì‹­ì„±: <strong style="color:var(--gold)">${tenStarName}</strong> Â· ${tenStarDesc} Â· ${curDaeun.yearFrom}~${curDaeun.yearTo}ë…„
        </div>
        <div class="cd-grid">
            ${scoreBarHtml('ì¬ë¬¼ìš´', 'ğŸ’°', curScores.wealth)}
            ${scoreBarHtml('ì§ì—…ìš´', 'ğŸ’¼', curScores.career)}
            ${scoreBarHtml('ê±´ê°•ìš´', 'ğŸ¥', curScores.health)}
            ${scoreBarHtml('ì—°ì• ìš´', 'â¤ï¸', curScores.love)}
            ${scoreBarHtml('ë°°ìš°ììš´', 'ğŸ’‘', curScores.spouse)}
            ${scoreBarHtml('ìì‹ìš´', 'ğŸ‘¶', curScores.children)}
        </div>
    `;

    // === 4. í‰ìƒ ìš´ì„¸ íë¦„ ì°¨íŠ¸ ===
    let flowHtml = '<div class="flow-title">ğŸ“ˆ í‰ìƒ ìš´ì„¸ íë¦„</div>';

    // ì¢…í•© ìš´ì„¸ ë§‰ëŒ€
    flowHtml += '<div style="margin-bottom:12px;font-size:12px;color:var(--text-muted)">â–¶ ì¢…í•© ìš´ê¸°</div><div class="flow-chart">';
    daeunList.forEach((d, i) => {
        const s = daeunScores[i].total;
        const barColor = s >= 75 ? 'var(--gold)' : s >= 60 ? 'var(--wood)' : s >= 45 ? 'var(--text-secondary)' : 'var(--fire)';
        const h = Math.max(8, s * 0.8);
        const isCur = i === currentIdx;
        flowHtml += `<div class="flow-bar-wrap">
            <div class="flow-bar" style="height:${h}%;background:${barColor};${isCur ? 'box-shadow:0 0 6px var(--gold);' : ''}"></div>
            <div class="flow-bar-label" style="${isCur ? 'color:var(--gold);font-weight:700' : ''}">${d.ageFrom}ëŒ€</div>
        </div>`;
    });
    flowHtml += '</div>';

    // ì„¸ë¶€ ìš´ì„¸ íë¦„ (ì¬ë¬¼, ê±´ê°•, ì—°ì• , ë°°ìš°ì, ìì‹)
    const flowItems = [
        { key: 'wealth', label: 'ğŸ’° ì¬ë¬¼ìš´', color: 'var(--gold)' },
        { key: 'health', label: 'ğŸ¥ ê±´ê°•ìš´', color: 'var(--wood)' },
        { key: 'love', label: 'â¤ï¸ ì—°ì• ìš´', color: 'var(--fire)' },
        { key: 'spouse', label: 'ğŸ’‘ ë°°ìš°ììš´', color: '#e879a0' },
        { key: 'children', label: 'ğŸ‘¶ ìì‹ìš´', color: 'var(--water)' }
    ];

    flowItems.forEach(fi => {
        flowHtml += `<div style="margin-top:12px;margin-bottom:4px;font-size:12px;color:var(--text-muted)">â–¶ ${fi.label}</div><div class="flow-chart">`;
        daeunList.forEach((d, i) => {
            const s = daeunScores[i][fi.key];
            const h = Math.max(8, s * 0.8);
            const isCur = i === currentIdx;
            flowHtml += `<div class="flow-bar-wrap">
                <div class="flow-bar" style="height:${h}%;background:${fi.color};opacity:${isCur ? 1 : 0.7};${isCur ? 'box-shadow:0 0 6px ' + fi.color + ';' : ''}"></div>
                <div class="flow-bar-label" style="${isCur ? 'color:var(--gold);font-weight:700' : ''}">${d.ageFrom}ëŒ€</div>
            </div>`;
        });
        flowHtml += '</div>';
    });

    document.getElementById('lifetimeFlow').innerHTML = flowHtml;

    // === 5. í‰ìƒìš´ ì¢…í•© ì¡°ì–¸ ===
    let adviceText = '';

    // ëŒ€ìš´ íë¦„ ë¶„ì„
    adviceText += `ëŒ€ìš´ì€ ${isForward ? '<strong>ìˆœí–‰(é †è¡Œ)</strong>' : '<strong>ì—­í–‰(é€†è¡Œ)</strong>'}ìœ¼ë¡œ ${startAge}ì„¸ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤. `;
    adviceText += `í˜„ì¬ <strong style="color:${ELEMENT_COLORS[curDaeun.ganEl]}">${curDaeun.ganHanja}${curDaeun.jiHanja} ëŒ€ìš´</strong>(${curDaeun.ageFrom}~${curDaeun.ageTo}ì„¸)ì— ìˆìœ¼ë©°, `;
    adviceText += `${tenStarName}ì˜ ê¸°ìš´ì´ ì‘ìš©í•©ë‹ˆë‹¤.`;

    // í˜„ì¬ ëŒ€ìš´ í•´ì„
    adviceText += '<br><br>';
    switch(curScores.tenStar.type) {
        case 'wealth':
            adviceText += 'ğŸ’° <strong>ì¬ì„± ëŒ€ìš´</strong>ì…ë‹ˆë‹¤. ì¬ë¬¼ê³¼ ê´€ë ¨ëœ ê¸°íšŒê°€ ë§ì€ ì‹œê¸°ì…ë‹ˆë‹¤. íˆ¬ì, ì‚¬ì—…, ì¬í…Œí¬ì— ìœ ë¦¬í•˜ë©°, í˜„ì‹¤ì ì¸ ëª©í‘œë¥¼ ì„¸ìš°ê³  ê¾¸ì¤€íˆ ë…¸ë ¥í•˜ë©´ ì¢‹ì€ ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ê³¼ìš•ì€ ê¸ˆë¬¼ì´ë©° ì•ˆì •ì ì¸ ìì‚° ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.';
            break;
        case 'power':
            adviceText += 'ğŸ’¼ <strong>ê´€ì„± ëŒ€ìš´</strong>ì…ë‹ˆë‹¤. ì§ì¥ì´ë‚˜ ì‚¬íšŒì  ì§€ìœ„ì— ë³€í™”ê°€ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìŠ¹ì§„, ëª…ì˜ˆ, ì±…ì„ê°ì´ ì»¤ì§€ë©°, ì¡°ì§ ë‚´ì—ì„œ ì¸ì •ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ìŠ¤íŠ¸ë ˆìŠ¤ì™€ ì••ë°•ê°ë„ ìˆìœ¼ë¯€ë¡œ ê±´ê°• ê´€ë¦¬ì— ì‹ ê²½ ì“°ì„¸ìš”.';
            break;
        case 'resource':
            adviceText += 'ğŸ“ <strong>ì¸ì„± ëŒ€ìš´</strong>ì…ë‹ˆë‹¤. í•™ì—…, ìê¸°ê³„ë°œ, ë‚´ë©´ì˜ ì„±ì¥ì— ìœ ë¦¬í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ê·€ì¸ì˜ ë„ì›€ì„ ë°›ê¸° ì‰¬ìš°ë©°, ìƒˆë¡œìš´ ì§€ì‹ê³¼ ì§€í˜œë¥¼ ìŒ“ê¸° ì¢‹ìŠµë‹ˆë‹¤. ì •ì‹ ì  ì•ˆì •ê³¼ í‰í™”ë¥¼ ëŠë¼ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.';
            break;
        case 'output':
            adviceText += 'ğŸ¨ <strong>ì‹ìƒ ëŒ€ìš´</strong>ì…ë‹ˆë‹¤. ì°½ì˜ë ¥, í‘œí˜„ë ¥ì´ ê·¹ëŒ€í™”ë˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì˜ˆìˆ , ì°½ì‘, ììœ ë¡œìš´ í™œë™ì— ìœ ë¦¬í•©ë‹ˆë‹¤. ìì‹ìš´ë„ ì¢‹ìœ¼ë©°, ìƒˆë¡œìš´ ê²ƒì„ íƒ„ìƒì‹œí‚¤ëŠ” ê¸°ìš´ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì²´ë ¥ ì†Œëª¨ì— ì£¼ì˜í•˜ì„¸ìš”.';
            break;
        case 'peer':
            adviceText += 'ğŸ¤ <strong>ë¹„ê² ëŒ€ìš´</strong>ì…ë‹ˆë‹¤. ë…ë¦½ì‹¬ì´ ê°•í•´ì§€ê³  ìê¸° ì£¼ë„ì ì¸ ì‚¶ì„ ì‚´ê²Œ ë˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ê²½ìŸì´ ìˆì§€ë§Œ ìë¦½ì˜ ê¸°íšŒì´ê¸°ë„ í•©ë‹ˆë‹¤. ì¸ê°„ê´€ê³„ì—ì„œ ì£¼ë„ê¶Œì„ ì¥ê²Œ ë˜ë©°, ìƒˆë¡œìš´ ì‹œì‘ì— ìœ ë¦¬í•©ë‹ˆë‹¤.';
            break;
    }

    // ì¬ë¬¼ìš´ íŠ¹ë³„ ì¡°ì–¸
    adviceText += '<br><br>ğŸ’° <strong>ì¬ë¬¼ìš´ í¬ì¸íŠ¸:</strong> ';
    const wealthPeak = daeunScores.reduce((best, s, i) => s.wealth > daeunScores[best].wealth ? i : best, 0);
    adviceText += `ì¬ë¬¼ìš´ì´ ê°€ì¥ ì¢‹ì€ ì‹œê¸°ëŠ” <strong>${daeunList[wealthPeak].ageFrom}~${daeunList[wealthPeak].ageTo}ì„¸</strong>(${daeunList[wealthPeak].yearFrom}~${daeunList[wealthPeak].yearTo}ë…„)ì…ë‹ˆë‹¤. `;
    if (curScores.wealth >= 70) adviceText += 'í˜„ì¬ ì¬ë¬¼ìš´ì´ ì¢‹ìœ¼ë‹ˆ ì ê·¹ì ì¸ ì¬í…Œí¬ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.';
    else if (curScores.wealth >= 55) adviceText += 'í˜„ì¬ ì¬ë¬¼ìš´ì€ ë³´í†µì´ë©°, ì•ˆì •ì ì¸ ì €ì¶•ê³¼ íˆ¬ìë¥¼ ê¶Œí•©ë‹ˆë‹¤.';
    else adviceText += 'í˜„ì¬ ì¬ë¬¼ìš´ì€ ë‹¤ì†Œ ë‚®ìœ¼ë‹ˆ í° íˆ¬ìë³´ë‹¤ëŠ” ì ˆì•½ê³¼ ì•ˆì •ì„ ì¶”êµ¬í•˜ì„¸ìš”.';

    // ê±´ê°•ìš´ íŠ¹ë³„ ì¡°ì–¸
    adviceText += '<br><br>ğŸ¥ <strong>ê±´ê°•ìš´ í¬ì¸íŠ¸:</strong> ';
    const healthLow = daeunScores.reduce((worst, s, i) => s.health < daeunScores[worst].health ? i : worst, 0);
    adviceText += `ê±´ê°•ì— íŠ¹íˆ ì£¼ì˜í•´ì•¼ í•  ì‹œê¸°ëŠ” <strong>${daeunList[healthLow].ageFrom}~${daeunList[healthLow].ageTo}ì„¸</strong>ì…ë‹ˆë‹¤. `;
    const dayElForHealth = CHEONGAN_ELEMENT[dayGan];
    const healthParts = ['ê°„/ë‹´(è‚è†½)', 'ì‹¬ì¥/ì†Œì¥(å¿ƒå°è…¸)', 'ìœ„/ë¹„ì¥(èƒƒè„¾)', 'í/ëŒ€ì¥(è‚ºå¤§è…¸)', 'ì‹ ì¥/ë°©ê´‘(è…è†€èƒ±)'];
    adviceText += `ì¼ê°„ ê¸°ì¤€ ${healthParts[dayElForHealth]} ê±´ê°•ì— í‰ìƒ ìœ ì˜í•˜ì„¸ìš”.`;

    // ì—°ì• /ë°°ìš°ììš´ ì¡°ì–¸
    adviceText += '<br><br>â¤ï¸ <strong>ì—°ì• Â·ë°°ìš°ììš´ í¬ì¸íŠ¸:</strong> ';
    const lovePeak = daeunScores.reduce((best, s, i) => s.love > daeunScores[best].love ? i : best, 0);
    const spousePeak = daeunScores.reduce((best, s, i) => s.spouse > daeunScores[best].spouse ? i : best, 0);
    adviceText += `ì—°ì• ìš´ì´ ê°€ì¥ ì¢‹ì€ ì‹œê¸°ëŠ” <strong>${daeunList[lovePeak].ageFrom}~${daeunList[lovePeak].ageTo}ì„¸</strong>ì´ë©°, `;
    adviceText += `ë°°ìš°ììš´ì´ ê°€ì¥ ì¢‹ì€ ì‹œê¸°ëŠ” <strong>${daeunList[spousePeak].ageFrom}~${daeunList[spousePeak].ageTo}ì„¸</strong>ì…ë‹ˆë‹¤. `;
    if (curScores.spouse >= 70) adviceText += 'í˜„ì¬ ë°°ìš°ìì™€ì˜ ê´€ê³„ê°€ ëˆë…í•´ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.';
    else if (curScores.love >= 70) adviceText += 'í˜„ì¬ ìƒˆë¡œìš´ ì¸ì—°ì„ ë§Œë‚˜ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.';

    // ìì‹ìš´ ì¡°ì–¸
    adviceText += '<br><br>ğŸ‘¶ <strong>ìì‹ìš´ í¬ì¸íŠ¸:</strong> ';
    const childPeak = daeunScores.reduce((best, s, i) => s.children > daeunScores[best].children ? i : best, 0);
    adviceText += `ìì‹ìš´ì´ ê°€ì¥ ì¢‹ì€ ì‹œê¸°ëŠ” <strong>${daeunList[childPeak].ageFrom}~${daeunList[childPeak].ageTo}ì„¸</strong>ì…ë‹ˆë‹¤. `;
    if (curScores.children >= 70) adviceText += 'í˜„ì¬ ìë…€ì™€ì˜ ê´€ê³„ê°€ ì¢‹ê±°ë‚˜, ìë…€ì—ê²Œ ê²½ì‚¬ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
    else adviceText += 'ìë…€ êµìœ¡ì´ë‚˜ ê´€ê³„ì— ìˆì–´ ê¾¸ì¤€í•œ ì†Œí†µì´ ì¤‘ìš”í•©ë‹ˆë‹¤.';

    // ì¸ìƒ ìµœê³  ìš´ê¸°
    adviceText += `<br><br>â­ <strong>ì¸ìƒ ìµœê³  ìš´ê¸°:</strong> <strong style="color:var(--gold)">${bestDaeun.ageFrom}~${bestDaeun.ageTo}ì„¸</strong>(${bestDaeun.yearFrom}~${bestDaeun.yearTo}ë…„)ì— ì¢…í•© ìš´ê¸°ê°€ ê°€ì¥ ë†’ìŠµë‹ˆë‹¤. ì´ ì‹œê¸°ë¥¼ ì˜ í™œìš©í•˜ì„¸ìš”!`;

    document.getElementById('lifetimeAdvice').innerHTML = `
        <div class="lifetime-advice-title">ğŸ”® í‰ìƒìš´ ì¢…í•© í•´ì„</div>
        <div class="lifetime-advice-text">${adviceText}</div>
    `;
}

function getFortuneAdvice(dayGan, tenStarType, elements, totalScore, scores) {
    const dayEl = CHEONGAN_ELEMENT[dayGan];
    const elNames = ['ëª©(æœ¨)', 'í™”(ç«)', 'í† (åœŸ)', 'ê¸ˆ(é‡‘)', 'ìˆ˜(æ°´)'];
    let advice = '';

    // ì „ì²´ ìš´ì„¸ ê¸°ì¡°
    advice += `2026ë…„ ë³‘ì˜¤(ä¸™åˆ)ë…„ì€ <strong style="color:var(--fire)">í™”(ç«)ì˜ ê¸°ìš´</strong>ì´ ì²œê°„ê³¼ ì§€ì§€ ëª¨ë‘ì—ì„œ ê°•í•˜ê²Œ ì‘ìš©í•˜ëŠ” í•´ì…ë‹ˆë‹¤. `;

    // ì‹­ì„± ê¸°ë°˜ ì¡°ì–¸
    switch(tenStarType) {
        case 'wealth':
            advice += 'ë‹¹ì‹ ì—ê²ŒëŠ” <strong style="color:var(--gold)">ì¬ì„±(è²¡æ˜Ÿ)ì˜ í•´</strong>ë¡œ, ì¬ë¬¼ê³¼ ê´€ë ¨ëœ ê¸°íšŒê°€ ì°¾ì•„ì˜µë‹ˆë‹¤. íˆ¬ìë‚˜ ì‚¬ì—… í™•ì¥ì— ìœ ë¦¬í•˜ë‚˜, ê³¼ìš•ì€ ê¸ˆë¬¼ì…ë‹ˆë‹¤. ';
            break;
        case 'power':
            advice += 'ë‹¹ì‹ ì—ê²ŒëŠ” <strong style="color:var(--fire)">ê´€ì„±(å®˜æ˜Ÿ)ì˜ í•´</strong>ë¡œ, ì§ì¥ì´ë‚˜ ì‚¬íšŒì  ì§€ìœ„ì— ë³€í™”ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìŠ¹ì§„ì´ë‚˜ ì±…ì„ì˜ ì¦ê°€ê°€ ì˜ˆìƒë©ë‹ˆë‹¤. ì••ë°•ê°ì„ ì§€í˜œë¡œ ê·¹ë³µí•˜ì„¸ìš”. ';
            break;
        case 'resource':
            advice += 'ë‹¹ì‹ ì—ê²ŒëŠ” <strong style="color:var(--water)">ì¸ì„±(å°æ˜Ÿ)ì˜ í•´</strong>ë¡œ, í•™ì—…ì´ë‚˜ ìê¸°ê³„ë°œì— ë§¤ìš° ìœ ë¦¬í•©ë‹ˆë‹¤. ê·€ì¸ì˜ ë„ì›€ì´ ìˆìœ¼ë©° ë‚´ë©´ì˜ ì„±ì¥ì´ í¬ê²Œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ';
            break;
        case 'output':
            advice += 'ë‹¹ì‹ ì—ê²ŒëŠ” <strong style="color:var(--wood)">ì‹ìƒ(é£Ÿå‚·)ì˜ í•´</strong>ë¡œ, ì°½ì˜ë ¥ê³¼ í‘œí˜„ë ¥ì´ ê·¹ëŒ€í™”ë©ë‹ˆë‹¤. ì˜ˆìˆ , ì°½ì‘, ì†Œí†µ ë¶„ì•¼ì—ì„œ ë¹›ì„ ë°œí•©ë‹ˆë‹¤. ë‹¤ë§Œ ì²´ë ¥ ê´€ë¦¬ì— ì‹ ê²½ ì“°ì„¸ìš”. ';
            break;
        case 'peer':
            advice += 'ë‹¹ì‹ ì—ê²ŒëŠ” <strong style="color:var(--metal)">ë¹„ê²(æ¯”åŠ«)ì˜ í•´</strong>ë¡œ, ê²½ìŸê³¼ í˜‘ë ¥ì´ ê³µì¡´í•˜ëŠ” í•œ í•´ì…ë‹ˆë‹¤. ë…ë¦½ì‹¬ì´ ê°•í•´ì§€ë©°, ì¸ê°„ê´€ê³„ì—ì„œ ì£¼ë„ì  ì—­í• ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. ';
            break;
    }

    // ì˜¤í–‰ ê· í˜• ì¡°ì–¸
    if (elements[1] === 0) {
        advice += '<br><br>ğŸ“Œ <strong>íŠ¹ë³„ ê¸¸ìš´:</strong> ì‚¬ì£¼ì— ë¶€ì¡±í•œ í™”(ç«)ë¥¼ 2026ë…„ ì„¸ìš´ì´ ì±„ì›Œì¤ë‹ˆë‹¤. í™œë ¥ê³¼ ì—´ì •ì´ ë˜ì‚´ì•„ë‚˜ëŠ” í•œ í•´ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ì ê·¹ì ìœ¼ë¡œ í–‰ë™í•˜ì„¸ìš”.';
    } else if (elements[1] >= 3) {
        advice += '<br><br>âš ï¸ <strong>ì£¼ì˜:</strong> ì‚¬ì£¼ì— ì´ë¯¸ í™”(ç«)ê°€ ë§ì€ë° ë³‘ì˜¤ë…„ì˜ ê°•í•œ í™” ê¸°ìš´ì´ ë”í•´ì ¸ ê³¼ì—´ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¬ì¥, í˜ˆì••, ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ì— ê°ë³„íˆ ì£¼ì˜í•˜ê³ , ìˆ˜(æ°´) ê¸°ìš´ì„ ë³´ì¶©í•˜ì„¸ìš”(ìˆ˜ì˜, ëª…ìƒ, ì°¨ë¶„í•œ í™œë™).';
    }

    // ê±´ê°• ì£¼ì˜
    if (scores.health < 55) {
        advice += '<br><br>ğŸ¥ <strong>ê±´ê°• ê´€ë¦¬:</strong> í™” ê¸°ìš´ì´ ê°•í•œ í•´ì´ë¯€ë¡œ ì‹¬ì¥, í˜ˆì••, ëˆˆ ê±´ê°•ì— ì£¼ì˜í•˜ì„¸ìš”. ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨ì™€ ê·œì¹™ì ì¸ íœ´ì‹ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.';
    }

    // í–‰ìš´ì˜ ë°©í–¥
    const luckyDirections = ['ë™ìª½', 'ë‚¨ìª½', 'ì¤‘ì•™', 'ì„œìª½', 'ë¶ìª½'];
    const luckyColors = ['ì´ˆë¡ìƒ‰', 'ë¹¨ê°„ìƒ‰', 'ë…¸ë€ìƒ‰', 'í°ìƒ‰', 'ê²€ì€ìƒ‰/íŒŒë€ìƒ‰'];
    const luckyNums = ['3, 8', '2, 7', '5, 10', '4, 9', '1, 6'];
    const needEl = elements.indexOf(Math.min(...elements));

    advice += `<br><br>ğŸ€ <strong>2026ë…„ í–‰ìš´ì˜ í‚¤ì›Œë“œ</strong><br>`;
    advice += `â€¢ í–‰ìš´ì˜ ë°©í–¥: <strong>${luckyDirections[needEl]}</strong><br>`;
    advice += `â€¢ í–‰ìš´ì˜ ìƒ‰ìƒ: <strong>${luckyColors[needEl]}</strong><br>`;
    advice += `â€¢ í–‰ìš´ì˜ ìˆ«ì: <strong>${luckyNums[needEl]}</strong>`;

    return advice;
}
</script>

</body>
</html>
